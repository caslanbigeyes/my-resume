{
  "title": "Next.js App Router å®Œå…¨æŒ‡å—",
  "excerpt": "å…¨é¢ä»‹ç» Next.js 14 çš„ App Routerï¼ŒåŒ…æ‹¬è·¯ç”±ç³»ç»Ÿã€å¸ƒå±€ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ç­‰æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚",
  "publishedAt": "2024-02-01T00:00:00.000Z",
  "author": "hero",
  "category": "frontend",
  "tags": [
    "nextjs",
    "react",
    "typescript"
  ],
  "featured": true,
  "published": true,
  "image": "/images/articles/nextjs-app-router.jpg",
  "seoTitle": "Next.js App Router å®Œå…¨æŒ‡å— - æŒæ¡æ–°ä¸€ä»£è·¯ç”±ç³»ç»Ÿ",
  "seoDescription": "å­¦ä¹  Next.js 14 App Router çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ã€å¸ƒå±€ã€æœåŠ¡å™¨ç»„ä»¶ç­‰",
  "seoKeywords": [
    "Next.js",
    "App Router",
    "React Server Components",
    "æ–‡ä»¶ç³»ç»Ÿè·¯ç”±"
  ],
  "body": {
    "raw": "\n# Next.js App Router å®Œå…¨æŒ‡å—\n\nNext.js 13 å¼•å…¥äº†å…¨æ–°çš„ App Routerï¼Œè¿™æ˜¯åŸºäº React Server Components æ„å»ºçš„ä¸‹ä¸€ä»£è·¯ç”±ç³»ç»Ÿã€‚æœ¬æ–‡å°†å…¨é¢ä»‹ç» App Router çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚\n\n## App Router vs Pages Router\n\n### Pages Router (ä¼ ç»Ÿæ–¹å¼)\n```\npages/\nâ”œâ”€â”€ index.js          // /\nâ”œâ”€â”€ about.js          // /about\nâ””â”€â”€ blog/\n    â”œâ”€â”€ index.js      // /blog\n    â””â”€â”€ [slug].js     // /blog/[slug]\n```\n\n### App Router (æ–°æ–¹å¼)\n```\napp/\nâ”œâ”€â”€ page.tsx          // /\nâ”œâ”€â”€ about/\nâ”‚   â””â”€â”€ page.tsx      // /about\nâ””â”€â”€ blog/\n    â”œâ”€â”€ page.tsx      // /blog\n    â””â”€â”€ [slug]/\n        â””â”€â”€ page.tsx  // /blog/[slug]\n```\n\n## æ ¸å¿ƒæ¦‚å¿µ\n\n### 1. æ–‡ä»¶çº¦å®š\n\nApp Router ä½¿ç”¨ç‰¹æ®Šçš„æ–‡ä»¶åæ¥å®šä¹‰è·¯ç”±è¡Œä¸ºï¼š\n\n- `page.tsx`: å®šä¹‰è·¯ç”±é¡µé¢\n- `layout.tsx`: å®šä¹‰å¸ƒå±€\n- `loading.tsx`: å®šä¹‰åŠ è½½çŠ¶æ€\n- `error.tsx`: å®šä¹‰é”™è¯¯é¡µé¢\n- `not-found.tsx`: å®šä¹‰ 404 é¡µé¢\n- `route.tsx`: å®šä¹‰ API è·¯ç”±\n\n### 2. å¸ƒå±€ç³»ç»Ÿ\n\n#### æ ¹å¸ƒå±€ (å¿…éœ€)\n\n```tsx\n// app/layout.tsx\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang=\"zh\">\n      <body>\n        <header>\n          <nav>å…¨å±€å¯¼èˆª</nav>\n        </header>\n        <main>{children}</main>\n        <footer>å…¨å±€é¡µè„š</footer>\n      </body>\n    </html>\n  );\n}\n```\n\n#### åµŒå¥—å¸ƒå±€\n\n```tsx\n// app/blog/layout.tsx\nexport default function BlogLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <div className=\"blog-container\">\n      <aside>\n        <h2>åšå®¢ä¾§è¾¹æ </h2>\n        <nav>åšå®¢å¯¼èˆª</nav>\n      </aside>\n      <div className=\"blog-content\">\n        {children}\n      </div>\n    </div>\n  );\n}\n```\n\n### 3. é¡µé¢ç»„ä»¶\n\n```tsx\n// app/blog/page.tsx\nexport default function BlogPage() {\n  return (\n    <div>\n      <h1>åšå®¢é¦–é¡µ</h1>\n      <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢</p>\n    </div>\n  );\n}\n```\n\n### 4. åŠ¨æ€è·¯ç”±\n\n#### å•ä¸ªåŠ¨æ€æ®µ\n\n```tsx\n// app/blog/[slug]/page.tsx\nexport default function BlogPost({\n  params,\n}: {\n  params: { slug: string };\n}) {\n  return (\n    <div>\n      <h1>æ–‡ç« : {params.slug}</h1>\n    </div>\n  );\n}\n```\n\n#### å¤šä¸ªåŠ¨æ€æ®µ\n\n```tsx\n// app/blog/[category]/[slug]/page.tsx\nexport default function CategoryPost({\n  params,\n}: {\n  params: { category: string; slug: string };\n}) {\n  return (\n    <div>\n      <h1>åˆ†ç±»: {params.category}</h1>\n      <h2>æ–‡ç« : {params.slug}</h2>\n    </div>\n  );\n}\n```\n\n#### æ•è·æ‰€æœ‰è·¯ç”±\n\n```tsx\n// app/docs/[...slug]/page.tsx\nexport default function DocsPage({\n  params,\n}: {\n  params: { slug: string[] };\n}) {\n  return (\n    <div>\n      <h1>æ–‡æ¡£è·¯å¾„: {params.slug.join('/')}</h1>\n    </div>\n  );\n}\n```\n\n## æœåŠ¡å™¨ç»„ä»¶ vs å®¢æˆ·ç«¯ç»„ä»¶\n\n### æœåŠ¡å™¨ç»„ä»¶ (é»˜è®¤)\n\n```tsx\n// è¿™æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç»„ä»¶\nasync function BlogPost({ params }: { params: { slug: string } }) {\n  // å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨ç«¯è·å–æ•°æ®\n  const post = await getPost(params.slug);\n\n  return (\n    <article>\n      <h1>{post.title}</h1>\n      <p>{post.content}</p>\n    </article>\n  );\n}\n```\n\n### å®¢æˆ·ç«¯ç»„ä»¶\n\n```tsx\n'use client'; // æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶\n\nimport { useState } from 'react';\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>è®¡æ•°: {count}</p>\n      <button onClick={() => setCount(count + 1)}>\n        å¢åŠ \n      </button>\n    </div>\n  );\n}\n```\n\n## æ•°æ®è·å–\n\n### æœåŠ¡å™¨ç«¯æ•°æ®è·å–\n\n```tsx\n// app/posts/page.tsx\nasync function getPosts() {\n  const res = await fetch('https://api.example.com/posts', {\n    // å¯ä»¥é…ç½®ç¼“å­˜ç­–ç•¥\n    next: { revalidate: 3600 } // 1å°æ—¶åé‡æ–°éªŒè¯\n  });\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch posts');\n  }\n\n  return res.json();\n}\n\nexport default async function PostsPage() {\n  const posts = await getPosts();\n\n  return (\n    <div>\n      <h1>æ–‡ç« åˆ—è¡¨</h1>\n      {posts.map((post: any) => (\n        <div key={post.id}>\n          <h2>{post.title}</h2>\n          <p>{post.excerpt}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n```\n\n### å¹¶è¡Œæ•°æ®è·å–\n\n```tsx\nasync function getUser(id: string) {\n  const res = await fetch(`/api/users/${id}`);\n  return res.json();\n}\n\nasync function getUserPosts(id: string) {\n  const res = await fetch(`/api/users/${id}/posts`);\n  return res.json();\n}\n\nexport default async function UserProfile({\n  params,\n}: {\n  params: { id: string };\n}) {\n  // å¹¶è¡Œè·å–æ•°æ®\n  const [user, posts] = await Promise.all([\n    getUser(params.id),\n    getUserPosts(params.id),\n  ]);\n\n  return (\n    <div>\n      <h1>{user.name}</h1>\n      <div>\n        <h2>ç”¨æˆ·æ–‡ç« </h2>\n        {posts.map((post: any) => (\n          <div key={post.id}>{post.title}</div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n## åŠ è½½çŠ¶æ€\n\n```tsx\n// app/blog/loading.tsx\nexport default function Loading() {\n  return (\n    <div className=\"loading-container\">\n      <div className=\"spinner\"></div>\n      <p>åŠ è½½ä¸­...</p>\n    </div>\n  );\n}\n```\n\n## é”™è¯¯å¤„ç†\n\n```tsx\n// app/blog/error.tsx\n'use client';\n\nexport default function Error({\n  error,\n  reset,\n}: {\n  error: Error & { digest?: string };\n  reset: () => void;\n}) {\n  return (\n    <div className=\"error-container\">\n      <h2>å‡ºé”™äº†ï¼</h2>\n      <p>{error.message}</p>\n      <button onClick={reset}>é‡è¯•</button>\n    </div>\n  );\n}\n```\n\n## è·¯ç”±ç»„\n\nä½¿ç”¨æ‹¬å·åˆ›å»ºè·¯ç”±ç»„ï¼Œä¸å½±å“ URL ç»“æ„ï¼š\n\n```\napp/\nâ”œâ”€â”€ (marketing)/\nâ”‚   â”œâ”€â”€ about/\nâ”‚   â”‚   â””â”€â”€ page.tsx     // /about\nâ”‚   â””â”€â”€ contact/\nâ”‚       â””â”€â”€ page.tsx     // /contact\nâ””â”€â”€ (shop)/\n    â”œâ”€â”€ products/\n    â”‚   â””â”€â”€ page.tsx     // /products\n    â””â”€â”€ cart/\n        â””â”€â”€ page.tsx     // /cart\n```\n\næ¯ä¸ªè·¯ç”±ç»„å¯ä»¥æœ‰è‡ªå·±çš„å¸ƒå±€ï¼š\n\n```tsx\n// app/(marketing)/layout.tsx\nexport default function MarketingLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <div className=\"marketing-layout\">\n      <nav>è¥é”€é¡µé¢å¯¼èˆª</nav>\n      {children}\n    </div>\n  );\n}\n```\n\n## æ‹¦æˆªè·¯ç”±\n\nä½¿ç”¨ `(..)` è¯­æ³•æ‹¦æˆªè·¯ç”±ï¼š\n\n```\napp/\nâ”œâ”€â”€ feed/\nâ”‚   â””â”€â”€ page.tsx\nâ”œâ”€â”€ photo/\nâ”‚   â””â”€â”€ [id]/\nâ”‚       â””â”€â”€ page.tsx\nâ””â”€â”€ @modal/\n    â””â”€â”€ (..)photo/\n        â””â”€â”€ [id]/\n            â””â”€â”€ page.tsx\n```\n\n## å¹¶è¡Œè·¯ç”±\n\nä½¿ç”¨ `@` è¯­æ³•åˆ›å»ºå¹¶è¡Œè·¯ç”±ï¼š\n\n```tsx\n// app/layout.tsx\nexport default function Layout({\n  children,\n  analytics,\n  team,\n}: {\n  children: React.ReactNode;\n  analytics: React.ReactNode;\n  team: React.ReactNode;\n}) {\n  return (\n    <>\n      {children}\n      {analytics}\n      {team}\n    </>\n  );\n}\n```\n\n## æœ€ä½³å®è·µ\n\n### 1. åˆç†ä½¿ç”¨æœåŠ¡å™¨ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶\n\n```tsx\n// æœåŠ¡å™¨ç»„ä»¶è´Ÿè´£æ•°æ®è·å–\nasync function PostList() {\n  const posts = await getPosts();\n\n  return (\n    <div>\n      {posts.map(post => (\n        <PostCard key={post.id} post={post} />\n      ))}\n    </div>\n  );\n}\n\n// å®¢æˆ·ç«¯ç»„ä»¶è´Ÿè´£äº¤äº’\n'use client';\nfunction PostCard({ post }) {\n  const [liked, setLiked] = useState(false);\n\n  return (\n    <div>\n      <h3>{post.title}</h3>\n      <button onClick={() => setLiked(!liked)}>\n        {liked ? 'â¤ï¸' : 'ğŸ¤'}\n      </button>\n    </div>\n  );\n}\n```\n\n### 2. ä¼˜åŒ–æ•°æ®è·å–\n\n```tsx\n// ä½¿ç”¨é€‚å½“çš„ç¼“å­˜ç­–ç•¥\nasync function getData() {\n  const res = await fetch('https://api.example.com/data', {\n    next: {\n      revalidate: 3600, // é™æ€é‡æ–°ç”Ÿæˆ\n      tags: ['posts'] // æ ‡ç­¾é‡æ–°éªŒè¯\n    }\n  });\n\n  return res.json();\n}\n```\n\n### 3. é”™è¯¯è¾¹ç•Œå’ŒåŠ è½½çŠ¶æ€\n\nä¸ºæ¯ä¸ªè·¯ç”±æ®µæä¾›é€‚å½“çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ï¼š\n\n```\napp/\nâ”œâ”€â”€ dashboard/\nâ”‚   â”œâ”€â”€ loading.tsx      // ä»ªè¡¨æ¿åŠ è½½çŠ¶æ€\nâ”‚   â”œâ”€â”€ error.tsx        // ä»ªè¡¨æ¿é”™è¯¯å¤„ç†\nâ”‚   â”œâ”€â”€ page.tsx\nâ”‚   â””â”€â”€ analytics/\nâ”‚       â”œâ”€â”€ loading.tsx  // åˆ†æé¡µé¢åŠ è½½çŠ¶æ€\nâ”‚       â”œâ”€â”€ error.tsx    // åˆ†æé¡µé¢é”™è¯¯å¤„ç†\nâ”‚       â””â”€â”€ page.tsx\n```\n\n## æ€»ç»“\n\nNext.js App Router å¸¦æ¥äº†è®¸å¤šå¼ºå¤§çš„ç‰¹æ€§ï¼š\n\n- **åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±**: ç›´è§‚çš„è·¯ç”±ç»“æ„\n- **å¸ƒå±€ç³»ç»Ÿ**: çµæ´»çš„åµŒå¥—å¸ƒå±€\n- **æœåŠ¡å™¨ç»„ä»¶**: æ›´å¥½çš„æ€§èƒ½å’Œ SEO\n- **æµå¼æ¸²æŸ“**: æ”¹å–„ç”¨æˆ·ä½“éªŒ\n- **å¹¶è¡Œè·¯ç”±**: å¤æ‚ UI çš„è§£å†³æ–¹æ¡ˆ\n\nApp Router ä»£è¡¨äº† React å’Œ Next.js çš„æœªæ¥æ–¹å‘ï¼Œå€¼å¾—æˆ‘ä»¬æ·±å…¥å­¦ä¹ å’Œå®è·µã€‚\n",
    "html": "<h1>Next.js App Router å®Œå…¨æŒ‡å—</h1>\n<p>Next.js 13 å¼•å…¥äº†å…¨æ–°çš„ App Routerï¼Œè¿™æ˜¯åŸºäº React Server Components æ„å»ºçš„ä¸‹ä¸€ä»£è·¯ç”±ç³»ç»Ÿã€‚æœ¬æ–‡å°†å…¨é¢ä»‹ç» App Router çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€ä½³å®è·µã€‚</p>\n<h2>App Router vs Pages Router</h2>\n<h3>Pages Router (ä¼ ç»Ÿæ–¹å¼)</h3>\n<pre><code>pages/\nâ”œâ”€â”€ index.js          // /\nâ”œâ”€â”€ about.js          // /about\nâ””â”€â”€ blog/\n    â”œâ”€â”€ index.js      // /blog\n    â””â”€â”€ [slug].js     // /blog/[slug]\n</code></pre>\n<h3>App Router (æ–°æ–¹å¼)</h3>\n<pre><code>app/\nâ”œâ”€â”€ page.tsx          // /\nâ”œâ”€â”€ about/\nâ”‚   â””â”€â”€ page.tsx      // /about\nâ””â”€â”€ blog/\n    â”œâ”€â”€ page.tsx      // /blog\n    â””â”€â”€ [slug]/\n        â””â”€â”€ page.tsx  // /blog/[slug]\n</code></pre>\n<h2>æ ¸å¿ƒæ¦‚å¿µ</h2>\n<h3>1. æ–‡ä»¶çº¦å®š</h3>\n<p>App Router ä½¿ç”¨ç‰¹æ®Šçš„æ–‡ä»¶åæ¥å®šä¹‰è·¯ç”±è¡Œä¸ºï¼š</p>\n<ul>\n<li><code>page.tsx</code>: å®šä¹‰è·¯ç”±é¡µé¢</li>\n<li><code>layout.tsx</code>: å®šä¹‰å¸ƒå±€</li>\n<li><code>loading.tsx</code>: å®šä¹‰åŠ è½½çŠ¶æ€</li>\n<li><code>error.tsx</code>: å®šä¹‰é”™è¯¯é¡µé¢</li>\n<li><code>not-found.tsx</code>: å®šä¹‰ 404 é¡µé¢</li>\n<li><code>route.tsx</code>: å®šä¹‰ API è·¯ç”±</li>\n</ul>\n<h3>2. å¸ƒå±€ç³»ç»Ÿ</h3>\n<h4>æ ¹å¸ƒå±€ (å¿…éœ€)</h4>\n<pre><code class=\"language-tsx\">// app/layout.tsx\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    &#x3C;html lang=\"zh\">\n      &#x3C;body>\n        &#x3C;header>\n          &#x3C;nav>å…¨å±€å¯¼èˆª&#x3C;/nav>\n        &#x3C;/header>\n        &#x3C;main>{children}&#x3C;/main>\n        &#x3C;footer>å…¨å±€é¡µè„š&#x3C;/footer>\n      &#x3C;/body>\n    &#x3C;/html>\n  );\n}\n</code></pre>\n<h4>åµŒå¥—å¸ƒå±€</h4>\n<pre><code class=\"language-tsx\">// app/blog/layout.tsx\nexport default function BlogLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    &#x3C;div className=\"blog-container\">\n      &#x3C;aside>\n        &#x3C;h2>åšå®¢ä¾§è¾¹æ &#x3C;/h2>\n        &#x3C;nav>åšå®¢å¯¼èˆª&#x3C;/nav>\n      &#x3C;/aside>\n      &#x3C;div className=\"blog-content\">\n        {children}\n      &#x3C;/div>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h3>3. é¡µé¢ç»„ä»¶</h3>\n<pre><code class=\"language-tsx\">// app/blog/page.tsx\nexport default function BlogPage() {\n  return (\n    &#x3C;div>\n      &#x3C;h1>åšå®¢é¦–é¡µ&#x3C;/h1>\n      &#x3C;p>æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢&#x3C;/p>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h3>4. åŠ¨æ€è·¯ç”±</h3>\n<h4>å•ä¸ªåŠ¨æ€æ®µ</h4>\n<pre><code class=\"language-tsx\">// app/blog/[slug]/page.tsx\nexport default function BlogPost({\n  params,\n}: {\n  params: { slug: string };\n}) {\n  return (\n    &#x3C;div>\n      &#x3C;h1>æ–‡ç« : {params.slug}&#x3C;/h1>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h4>å¤šä¸ªåŠ¨æ€æ®µ</h4>\n<pre><code class=\"language-tsx\">// app/blog/[category]/[slug]/page.tsx\nexport default function CategoryPost({\n  params,\n}: {\n  params: { category: string; slug: string };\n}) {\n  return (\n    &#x3C;div>\n      &#x3C;h1>åˆ†ç±»: {params.category}&#x3C;/h1>\n      &#x3C;h2>æ–‡ç« : {params.slug}&#x3C;/h2>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h4>æ•è·æ‰€æœ‰è·¯ç”±</h4>\n<pre><code class=\"language-tsx\">// app/docs/[...slug]/page.tsx\nexport default function DocsPage({\n  params,\n}: {\n  params: { slug: string[] };\n}) {\n  return (\n    &#x3C;div>\n      &#x3C;h1>æ–‡æ¡£è·¯å¾„: {params.slug.join('/')}&#x3C;/h1>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h2>æœåŠ¡å™¨ç»„ä»¶ vs å®¢æˆ·ç«¯ç»„ä»¶</h2>\n<h3>æœåŠ¡å™¨ç»„ä»¶ (é»˜è®¤)</h3>\n<pre><code class=\"language-tsx\">// è¿™æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç»„ä»¶\nasync function BlogPost({ params }: { params: { slug: string } }) {\n  // å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨ç«¯è·å–æ•°æ®\n  const post = await getPost(params.slug);\n\n  return (\n    &#x3C;article>\n      &#x3C;h1>{post.title}&#x3C;/h1>\n      &#x3C;p>{post.content}&#x3C;/p>\n    &#x3C;/article>\n  );\n}\n</code></pre>\n<h3>å®¢æˆ·ç«¯ç»„ä»¶</h3>\n<pre><code class=\"language-tsx\">'use client'; // æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶\n\nimport { useState } from 'react';\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    &#x3C;div>\n      &#x3C;p>è®¡æ•°: {count}&#x3C;/p>\n      &#x3C;button onClick={() => setCount(count + 1)}>\n        å¢åŠ \n      &#x3C;/button>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h2>æ•°æ®è·å–</h2>\n<h3>æœåŠ¡å™¨ç«¯æ•°æ®è·å–</h3>\n<pre><code class=\"language-tsx\">// app/posts/page.tsx\nasync function getPosts() {\n  const res = await fetch('https://api.example.com/posts', {\n    // å¯ä»¥é…ç½®ç¼“å­˜ç­–ç•¥\n    next: { revalidate: 3600 } // 1å°æ—¶åé‡æ–°éªŒè¯\n  });\n\n  if (!res.ok) {\n    throw new Error('Failed to fetch posts');\n  }\n\n  return res.json();\n}\n\nexport default async function PostsPage() {\n  const posts = await getPosts();\n\n  return (\n    &#x3C;div>\n      &#x3C;h1>æ–‡ç« åˆ—è¡¨&#x3C;/h1>\n      {posts.map((post: any) => (\n        &#x3C;div key={post.id}>\n          &#x3C;h2>{post.title}&#x3C;/h2>\n          &#x3C;p>{post.excerpt}&#x3C;/p>\n        &#x3C;/div>\n      ))}\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h3>å¹¶è¡Œæ•°æ®è·å–</h3>\n<pre><code class=\"language-tsx\">async function getUser(id: string) {\n  const res = await fetch(`/api/users/${id}`);\n  return res.json();\n}\n\nasync function getUserPosts(id: string) {\n  const res = await fetch(`/api/users/${id}/posts`);\n  return res.json();\n}\n\nexport default async function UserProfile({\n  params,\n}: {\n  params: { id: string };\n}) {\n  // å¹¶è¡Œè·å–æ•°æ®\n  const [user, posts] = await Promise.all([\n    getUser(params.id),\n    getUserPosts(params.id),\n  ]);\n\n  return (\n    &#x3C;div>\n      &#x3C;h1>{user.name}&#x3C;/h1>\n      &#x3C;div>\n        &#x3C;h2>ç”¨æˆ·æ–‡ç« &#x3C;/h2>\n        {posts.map((post: any) => (\n          &#x3C;div key={post.id}>{post.title}&#x3C;/div>\n        ))}\n      &#x3C;/div>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h2>åŠ è½½çŠ¶æ€</h2>\n<pre><code class=\"language-tsx\">// app/blog/loading.tsx\nexport default function Loading() {\n  return (\n    &#x3C;div className=\"loading-container\">\n      &#x3C;div className=\"spinner\">&#x3C;/div>\n      &#x3C;p>åŠ è½½ä¸­...&#x3C;/p>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h2>é”™è¯¯å¤„ç†</h2>\n<pre><code class=\"language-tsx\">// app/blog/error.tsx\n'use client';\n\nexport default function Error({\n  error,\n  reset,\n}: {\n  error: Error &#x26; { digest?: string };\n  reset: () => void;\n}) {\n  return (\n    &#x3C;div className=\"error-container\">\n      &#x3C;h2>å‡ºé”™äº†ï¼&#x3C;/h2>\n      &#x3C;p>{error.message}&#x3C;/p>\n      &#x3C;button onClick={reset}>é‡è¯•&#x3C;/button>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h2>è·¯ç”±ç»„</h2>\n<p>ä½¿ç”¨æ‹¬å·åˆ›å»ºè·¯ç”±ç»„ï¼Œä¸å½±å“ URL ç»“æ„ï¼š</p>\n<pre><code>app/\nâ”œâ”€â”€ (marketing)/\nâ”‚   â”œâ”€â”€ about/\nâ”‚   â”‚   â””â”€â”€ page.tsx     // /about\nâ”‚   â””â”€â”€ contact/\nâ”‚       â””â”€â”€ page.tsx     // /contact\nâ””â”€â”€ (shop)/\n    â”œâ”€â”€ products/\n    â”‚   â””â”€â”€ page.tsx     // /products\n    â””â”€â”€ cart/\n        â””â”€â”€ page.tsx     // /cart\n</code></pre>\n<p>æ¯ä¸ªè·¯ç”±ç»„å¯ä»¥æœ‰è‡ªå·±çš„å¸ƒå±€ï¼š</p>\n<pre><code class=\"language-tsx\">// app/(marketing)/layout.tsx\nexport default function MarketingLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    &#x3C;div className=\"marketing-layout\">\n      &#x3C;nav>è¥é”€é¡µé¢å¯¼èˆª&#x3C;/nav>\n      {children}\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h2>æ‹¦æˆªè·¯ç”±</h2>\n<p>ä½¿ç”¨ <code>(..)</code> è¯­æ³•æ‹¦æˆªè·¯ç”±ï¼š</p>\n<pre><code>app/\nâ”œâ”€â”€ feed/\nâ”‚   â””â”€â”€ page.tsx\nâ”œâ”€â”€ photo/\nâ”‚   â””â”€â”€ [id]/\nâ”‚       â””â”€â”€ page.tsx\nâ””â”€â”€ @modal/\n    â””â”€â”€ (..)photo/\n        â””â”€â”€ [id]/\n            â””â”€â”€ page.tsx\n</code></pre>\n<h2>å¹¶è¡Œè·¯ç”±</h2>\n<p>ä½¿ç”¨ <code>@</code> è¯­æ³•åˆ›å»ºå¹¶è¡Œè·¯ç”±ï¼š</p>\n<pre><code class=\"language-tsx\">// app/layout.tsx\nexport default function Layout({\n  children,\n  analytics,\n  team,\n}: {\n  children: React.ReactNode;\n  analytics: React.ReactNode;\n  team: React.ReactNode;\n}) {\n  return (\n    &#x3C;>\n      {children}\n      {analytics}\n      {team}\n    &#x3C;/>\n  );\n}\n</code></pre>\n<h2>æœ€ä½³å®è·µ</h2>\n<h3>1. åˆç†ä½¿ç”¨æœåŠ¡å™¨ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶</h3>\n<pre><code class=\"language-tsx\">// æœåŠ¡å™¨ç»„ä»¶è´Ÿè´£æ•°æ®è·å–\nasync function PostList() {\n  const posts = await getPosts();\n\n  return (\n    &#x3C;div>\n      {posts.map(post => (\n        &#x3C;PostCard key={post.id} post={post} />\n      ))}\n    &#x3C;/div>\n  );\n}\n\n// å®¢æˆ·ç«¯ç»„ä»¶è´Ÿè´£äº¤äº’\n'use client';\nfunction PostCard({ post }) {\n  const [liked, setLiked] = useState(false);\n\n  return (\n    &#x3C;div>\n      &#x3C;h3>{post.title}&#x3C;/h3>\n      &#x3C;button onClick={() => setLiked(!liked)}>\n        {liked ? 'â¤ï¸' : 'ğŸ¤'}\n      &#x3C;/button>\n    &#x3C;/div>\n  );\n}\n</code></pre>\n<h3>2. ä¼˜åŒ–æ•°æ®è·å–</h3>\n<pre><code class=\"language-tsx\">// ä½¿ç”¨é€‚å½“çš„ç¼“å­˜ç­–ç•¥\nasync function getData() {\n  const res = await fetch('https://api.example.com/data', {\n    next: {\n      revalidate: 3600, // é™æ€é‡æ–°ç”Ÿæˆ\n      tags: ['posts'] // æ ‡ç­¾é‡æ–°éªŒè¯\n    }\n  });\n\n  return res.json();\n}\n</code></pre>\n<h3>3. é”™è¯¯è¾¹ç•Œå’ŒåŠ è½½çŠ¶æ€</h3>\n<p>ä¸ºæ¯ä¸ªè·¯ç”±æ®µæä¾›é€‚å½“çš„é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ï¼š</p>\n<pre><code>app/\nâ”œâ”€â”€ dashboard/\nâ”‚   â”œâ”€â”€ loading.tsx      // ä»ªè¡¨æ¿åŠ è½½çŠ¶æ€\nâ”‚   â”œâ”€â”€ error.tsx        // ä»ªè¡¨æ¿é”™è¯¯å¤„ç†\nâ”‚   â”œâ”€â”€ page.tsx\nâ”‚   â””â”€â”€ analytics/\nâ”‚       â”œâ”€â”€ loading.tsx  // åˆ†æé¡µé¢åŠ è½½çŠ¶æ€\nâ”‚       â”œâ”€â”€ error.tsx    // åˆ†æé¡µé¢é”™è¯¯å¤„ç†\nâ”‚       â””â”€â”€ page.tsx\n</code></pre>\n<h2>æ€»ç»“</h2>\n<p>Next.js App Router å¸¦æ¥äº†è®¸å¤šå¼ºå¤§çš„ç‰¹æ€§ï¼š</p>\n<ul>\n<li><strong>åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±</strong>: ç›´è§‚çš„è·¯ç”±ç»“æ„</li>\n<li><strong>å¸ƒå±€ç³»ç»Ÿ</strong>: çµæ´»çš„åµŒå¥—å¸ƒå±€</li>\n<li><strong>æœåŠ¡å™¨ç»„ä»¶</strong>: æ›´å¥½çš„æ€§èƒ½å’Œ SEO</li>\n<li><strong>æµå¼æ¸²æŸ“</strong>: æ”¹å–„ç”¨æˆ·ä½“éªŒ</li>\n<li><strong>å¹¶è¡Œè·¯ç”±</strong>: å¤æ‚ UI çš„è§£å†³æ–¹æ¡ˆ</li>\n</ul>\n<p>App Router ä»£è¡¨äº† React å’Œ Next.js çš„æœªæ¥æ–¹å‘ï¼Œå€¼å¾—æˆ‘ä»¬æ·±å…¥å­¦ä¹ å’Œå®è·µã€‚</p>"
  },
  "_id": "articles/nextjs-app-router-guide.md",
  "_raw": {
    "sourceFilePath": "articles/nextjs-app-router-guide.md",
    "sourceFileName": "nextjs-app-router-guide.md",
    "sourceFileDir": "articles",
    "contentType": "markdown",
    "flattenedPath": "articles/nextjs-app-router-guide"
  },
  "type": "Article",
  "slug": "nextjs-app-router-guide",
  "readingTime": {
    "text": "7 min read",
    "minutes": 6.71,
    "time": 402600,
    "words": 1342
  },
  "url": "/articles/nextjs-app-router-guide"
}