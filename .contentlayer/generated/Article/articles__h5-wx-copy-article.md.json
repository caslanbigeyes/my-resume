{
  "title": "ç ´è§£å¾®ä¿¡ H5 å¤åˆ¶éš¾é¢˜ï¼šä¸€å¥—å®Œæ•´çš„ç§»åŠ¨ç«¯å¤åˆ¶è§£å†³æ–¹æ¡ˆ",
  "excerpt": "æ·±å…¥åˆ†æå¾®ä¿¡å†…ç½®æµè§ˆå™¨çš„å¤åˆ¶é™åˆ¶ï¼Œæä¾›ä¸€å¥—ç»è¿‡å®æˆ˜éªŒè¯çš„æ¸è¿›å¼é™çº§å¤åˆ¶æ–¹æ¡ˆï¼Œæ”¯æŒå¾®ä¿¡ JSBridgeã€ç°ä»£ Clipboard API å’Œæ‰‹åŠ¨å¤åˆ¶å¼•å¯¼ã€‚",
  "publishedAt": "2025-01-21T00:00:00.000Z",
  "author": "hero",
  "category": "frontend",
  "tags": [
    "h5",
    "å¾®ä¿¡",
    "å¤åˆ¶",
    "ç§»åŠ¨ç«¯",
    "javascript",
    "typescript"
  ],
  "featured": true,
  "published": true,
  "image": "/images/articles/h5-wx-copy.jpg",
  "seoTitle": "H5 å¾®ä¿¡å¤åˆ¶åŠŸèƒ½å®Œæ•´è§£å†³æ–¹æ¡ˆ - ç§»åŠ¨ç«¯å¤åˆ¶æœ€ä½³å®è·µ",
  "seoDescription": "å­¦ä¹ å¦‚ä½•è§£å†³å¾®ä¿¡ H5 å¤åˆ¶éš¾é¢˜ï¼ŒåŒ…æ‹¬å¾®ä¿¡ JSBridge APIã€æ¸è¿›å¼é™çº§ç­–ç•¥å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–",
  "seoKeywords": [
    "H5",
    "å¾®ä¿¡å¤åˆ¶",
    "ç§»åŠ¨ç«¯",
    "JavaScript",
    "å¤åˆ¶åŠŸèƒ½",
    "å¾®ä¿¡å¼€å‘"
  ],
  "body": {
    "raw": "\n# ç ´è§£å¾®ä¿¡ H5 å¤åˆ¶éš¾é¢˜ï¼šä¸€å¥—å®Œæ•´çš„ç§»åŠ¨ç«¯å¤åˆ¶è§£å†³æ–¹æ¡ˆ\n\n## ğŸ“‹ æ–‡æ¡£è¯´æ˜\n\næœ¬æ–‡æ¡£å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è§£å†³ç§»åŠ¨ç«¯ H5 é¡µé¢åœ¨å¾®ä¿¡ç¯å¢ƒä¸‹çš„æ–‡æœ¬å¤åˆ¶é—®é¢˜ï¼ŒåŒ…æ‹¬ç¯å¢ƒæ£€æµ‹ã€å¤šé‡å¤åˆ¶ç­–ç•¥ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–å’Œå®æˆ˜åº”ç”¨ã€‚é€‚åˆå‰ç«¯å¼€å‘è€…ã€ç§»åŠ¨ç«¯å¼€å‘è€…å’Œéœ€è¦åœ¨å¾®ä¿¡ä¸­å®ç°å¤åˆ¶åŠŸèƒ½çš„å¼€å‘å›¢é˜Ÿã€‚\n\n## ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„å¾®ä¿¡å¤åˆ¶æ–¹æ¡ˆï¼Ÿ\n\n### å¾®ä¿¡ç¯å¢ƒçš„å¤åˆ¶æŒ‘æˆ˜\n\nå¾®ä¿¡å†…ç½®æµè§ˆå™¨åŸºäº X5 å†…æ ¸ï¼Œå¯¹å‰ªè´´æ¿æ“ä½œæœ‰ä¸¥æ ¼é™åˆ¶ï¼š\n\n1. **API é™åˆ¶**ï¼šæ ‡å‡†çš„ `navigator.clipboard` API åœ¨å¾®ä¿¡ä¸­æ”¯æŒæœ‰é™\n2. **å®‰å…¨ç­–ç•¥**ï¼š`document.execCommand('copy')` åœ¨æŸäº›ç‰ˆæœ¬ä¸­è¢«ç¦ç”¨\n3. **ç”¨æˆ·ä½“éªŒ**ï¼šå³ä½¿å¤åˆ¶æˆåŠŸï¼Œç”¨æˆ·ä¹Ÿç¼ºä¹æ˜ç¡®çš„åé¦ˆ\n4. **å¹³å°å·®å¼‚**ï¼šiOS å’Œ Android å¾®ä¿¡çš„è¡Œä¸ºå­˜åœ¨å·®å¼‚\n\n### é€‚ç”¨åœºæ™¯\n- é‚€è¯·é“¾æ¥åˆ†äº«åŠŸèƒ½\n- ä¼˜æƒ ç å¤åˆ¶åŠŸèƒ½\n- App ä¸‹è½½é“¾æ¥åˆ†äº«\n- æ–‡æœ¬å†…å®¹å¿«é€Ÿåˆ†äº«\n- å¾®ä¿¡å°ç¨‹åºå¤–é“¾åˆ†äº«\n\n---\n\n## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆè®¾è®¡\n\n### 1. æ ¸å¿ƒæ€è·¯ï¼šæ¸è¿›å¼é™çº§ç­–ç•¥\n\næˆ‘ä»¬é‡‡ç”¨\"ä¼˜å…ˆä½¿ç”¨æœ€ä½³æ–¹æ¡ˆï¼Œé€æ­¥é™çº§åˆ°å…¼å®¹æ–¹æ¡ˆ\"çš„ç­–ç•¥ï¼š\n\n```\nå¾®ä¿¡ JSBridge API â†’ ç°ä»£ Clipboard API â†’ execCommand â†’ æ‰‹åŠ¨å¤åˆ¶å¼•å¯¼\n```\n\n### 2. ç¯å¢ƒæ£€æµ‹æœºåˆ¶\n\n#### 2.1 å¾®ä¿¡ç¯å¢ƒæ£€æµ‹\n```typescript\nconst isInWechat = () => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes(\"micromessenger\");\n};\n```\n\n#### 2.2 å®‰å“å¾®ä¿¡æ£€æµ‹\n```typescript\nconst isAndroidWeixin = () => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes('micromessenger') && ua.includes('android');\n};\n```\n\n#### 2.3 åä¸ºæµè§ˆå™¨æ£€æµ‹\n```typescript\nconst isHuaweiBrowser = () => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes('huawei') || ua.includes('honor') ||\n         ua.includes('hbrowser') || ua.includes('emui');\n};\n```\n\n### 3. ç­–ç•¥é€‰æ‹©æ¶æ„\n\n```typescript\n// ç­–ç•¥é€‰æ‹©\nif (isInWechat()) {\n  // ä½¿ç”¨å¾®ä¿¡ä¸“ç”¨æ–¹æ¡ˆ\n  if (isAndroidWeixin()) {\n    enhancedCopyForAndroidWeixin(text);\n  } else {\n    copyTextByWeixin(text);\n  }\n} else {\n  // ä½¿ç”¨é€šç”¨æ–¹æ¡ˆ\n  copyTextMobile(text);\n}\n```\n\n---\n\n## ğŸ”§ æ ¸å¿ƒå®ç°\n\n### 4. å¾®ä¿¡ç¯å¢ƒä¸“ç”¨å¤åˆ¶å‡½æ•°\n\n#### 4.1 åŸºç¡€å¾®ä¿¡å¤åˆ¶å‡½æ•°\n```typescript\nexport function copyTextByWeixin(\n  text: string,\n  onSuccess?: () => void,\n  onFail?: () => void\n): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    // ä¼˜å…ˆå°è¯•å¾®ä¿¡ JSBridge API\n    if (typeof window.WeixinJSBridge !== 'undefined' && window.WeixinJSBridge.invoke) {\n      tryWeixinAPI();\n    } else {\n      tryExecCommand();\n    }\n\n    function tryWeixinAPI() {\n      try {\n        window.WeixinJSBridge.invoke(\n          'setClipboardData',\n          { data: text },\n          (res: any) => {\n            if (res.err_msg === 'setClipboardData:ok') {\n              // éªŒè¯å¤åˆ¶æ˜¯å¦çœŸæ­£æˆåŠŸ\n              checkClipboard(text)\n                .then((ok) => {\n                  if (ok) {\n                    onSuccess?.();\n                    resolve(true);\n                  } else {\n                    tryExecCommand();\n                  }\n                })\n                .catch(() => tryExecCommand());\n            } else {\n              tryExecCommand();\n            }\n          }\n        );\n      } catch (err) {\n        tryExecCommand();\n      }\n    }\n\n    function tryExecCommand() {\n      try {\n        const textarea = document.createElement('textarea');\n        textarea.value = text;\n        textarea.style.position = 'fixed';\n        textarea.style.opacity = '0';\n        textarea.style.zIndex = '-1';\n        document.body.appendChild(textarea);\n        textarea.focus();\n        textarea.select();\n\n        const successful = document.execCommand('copy');\n        document.body.removeChild(textarea);\n\n        if (successful) {\n          onSuccess?.();\n          resolve(true);\n        } else {\n          showManualCopyTip(text);\n          onFail?.();\n          resolve(false);\n        }\n      } catch (err) {\n        showManualCopyTip(text);\n        onFail?.();\n        reject(err);\n      }\n    }\n  });\n}\n```\n\n#### 4.2 å¤åˆ¶ç»“æœéªŒè¯\n```typescript\nfunction checkClipboard(expected: string): Promise<boolean> {\n  return new Promise((resolve) => {\n    try {\n      window.WeixinJSBridge.invoke('getClipboardData', {}, (res: any) => {\n        if (res.err_msg === 'getClipboardData:ok' && res.data === expected) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    } catch {\n      resolve(false);\n    }\n  });\n}\n```\n\n**å…³é”®ç‰¹æ€§ï¼š**\n- ä½¿ç”¨å¾®ä¿¡æä¾›çš„åŸç”Ÿ `setClipboardData` API\n- é€šè¿‡ `getClipboardData` éªŒè¯å¤åˆ¶ç»“æœ\n- å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ° `execCommand`\n- æ”¯æŒæˆåŠŸ/å¤±è´¥å›è°ƒå‡½æ•°\n\n### 5. å®‰å“å¾®ä¿¡å¢å¼ºç‰ˆå¤åˆ¶\n\n#### 5.1 å¢å¼ºç‰ˆå¤åˆ¶å‡½æ•°\n```typescript\nexport function enhancedCopyForAndroidWeixin(\n  text: string,\n  onSuccess?: () => void,\n  onFail?: () => void\n): Promise<boolean> {\n  return new Promise((resolve) => {\n    const ua = navigator.userAgent.toLowerCase();\n    const isAndroidWeixin = ua.includes('micromessenger') && ua.includes('android');\n\n    if (isAndroidWeixin) {\n      androidWeixinCopy(text, onSuccess, onFail, resolve);\n    } else {\n      copyTextByWeixin(text, onSuccess, onFail).then(resolve);\n    }\n  });\n}\n```\n\n#### 5.2 å®‰å“å¾®ä¿¡ä¸“ç”¨å¤åˆ¶ç•Œé¢\n```typescript\nfunction androidWeixinCopy(\n  text: string,\n  onSuccess?: () => void,\n  onFail?: () => void,\n  resolve?: (value: boolean) => void\n) {\n  // åˆ›å»ºå¯è§†åŒ–å¤åˆ¶ç•Œé¢\n  const input = document.createElement('input');\n  input.value = text;\n  input.setAttribute('readonly', 'readonly');\n  input.style.position = 'fixed';\n  input.style.left = '50%';\n  input.style.top = '50%';\n  input.style.transform = 'translate(-50%, -50%)';\n  input.style.width = '90vw';\n  input.style.maxWidth = '400px';\n  input.style.height = '50px';\n  input.style.zIndex = '10000';\n  input.style.backgroundColor = 'white';\n  input.style.border = '2px solid #1aad19';\n  input.style.borderRadius = '8px';\n  input.style.padding = '12px';\n  input.style.fontSize = '16px';\n  input.style.textAlign = 'center';\n  input.style.color = '#333';\n  input.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';\n\n  // åˆ›å»ºæç¤ºæ–‡å­—\n  const tip = document.createElement('div');\n  tip.innerHTML = 'é“¾æ¥å·²å‡†å¤‡å¥½ï¼Œè¯·é•¿æŒ‰é€‰ä¸­å¹¶å¤åˆ¶';\n  tip.style.position = 'fixed';\n  tip.style.left = '50%';\n  tip.style.top = 'calc(50% - 60px)';\n  tip.style.transform = 'translate(-50%, -50%)';\n  tip.style.color = '#1aad19';\n  tip.style.fontSize = '14px';\n  tip.style.fontWeight = 'bold';\n  tip.style.textAlign = 'center';\n\n  // åˆ›å»ºå®¹å™¨å’Œå…³é—­æŒ‰é’®\n  const container = createModalContainer();\n  container.appendChild(tip);\n  container.appendChild(input);\n  container.appendChild(createCloseButton(cleanup));\n\n  document.body.appendChild(container);\n\n  // è‡ªåŠ¨èšç„¦å’Œé€‰ä¸­\n  setTimeout(() => {\n    input.focus();\n    input.select();\n    input.setSelectionRange(0, text.length);\n\n    // å°è¯•è‡ªåŠ¨å¤åˆ¶\n    const successful = document.execCommand('copy');\n    if (successful) {\n      tip.innerHTML = 'å¤åˆ¶æˆåŠŸï¼';\n      onSuccess?.();\n      resolve?.(true);\n      setTimeout(cleanup, 1500);\n    }\n  }, 200);\n}\n```\n\n**å¢å¼ºç‰¹æ€§ï¼š**\n- åˆ›å»ºå¯è§†åŒ–å¤åˆ¶ç•Œé¢\n- æä¾›ç”¨æˆ·æ“ä½œå¼•å¯¼\n- æ”¯æŒæ‰‹åŠ¨å¤åˆ¶å¤‡ç”¨æ–¹æ¡ˆ\n- è‡ªåŠ¨æ¸…ç†ç•Œé¢å…ƒç´ \n- æ”¯æŒå…³é—­æŒ‰é’®å’ŒèƒŒæ™¯ç‚¹å‡»å…³é—­\n\n### 6. é€šç”¨ç§»åŠ¨ç«¯å¤åˆ¶æ–¹æ¡ˆ\n\n#### 6.1 ç§»åŠ¨ç«¯å…¼å®¹å¤åˆ¶å‡½æ•°\n```typescript\nconst copyTextMobile = (text: string): Promise<boolean> => {\n  return new Promise((resolve, reject) => {\n    console.log('å¼€å§‹å¤åˆ¶æ–‡æœ¬:', text);\n    console.log('æ˜¯å¦åä¸ºæµè§ˆå™¨:', isHuaweiBrowser());\n    console.log('æ˜¯å¦å¾®ä¿¡æµè§ˆå™¨:', isInWechat());\n\n    // å¦‚æœåœ¨å¾®ä¿¡ç¯å¢ƒä¸­ï¼Œä¼˜å…ˆä½¿ç”¨å¾®ä¿¡ä¸“ç”¨å¤åˆ¶æ–¹æ³•\n    if (isInWechat()) {\n      copyTextByWeixin(text)\n        .then(() => {\n          console.log('å¾®ä¿¡å¤åˆ¶æˆåŠŸ');\n          resolve(true);\n        })\n        .catch((err) => {\n          console.log('å¾®ä¿¡å¤åˆ¶å¤±è´¥ï¼Œå°è¯•é€šç”¨æ–¹æ³•:', err);\n          tryGeneralCopy();\n        });\n    } else {\n      tryGeneralCopy();\n    }\n\n    function tryGeneralCopy() {\n      // ä¼˜å…ˆå°è¯• Clipboard API\n      if (navigator.clipboard && window.isSecureContext) {\n        console.log('ä½¿ç”¨ç°ä»£ Clipboard API');\n        navigator.clipboard.writeText(text)\n          .then(() => {\n            console.log('ç°ä»£ Clipboard API å¤åˆ¶æˆåŠŸ');\n            resolve(true);\n          })\n          .catch((err) => {\n            console.log('ç°ä»£ Clipboard API å¤±è´¥ï¼Œå°è¯•åä¸ºå…¼å®¹æ–¹æ³•:', err);\n            huaweiCompatibleCopy(text, resolve, reject);\n          });\n      } else {\n        // å…¶ä»–æƒ…å†µä¼˜å…ˆç”¨åä¸ºå…¼å®¹æ–¹æ³•\n        huaweiCompatibleCopy(text, resolve, reject);\n      }\n    }\n  });\n};\n```\n\n#### 6.2 åä¸ºæµè§ˆå™¨å…¼å®¹æ–¹æ³•\n```typescript\nconst huaweiCompatibleCopy = (\n  text: string,\n  resolve: (value: boolean) => void,\n  reject: (reason?: any) => void\n) => {\n  try {\n    console.log('ä½¿ç”¨åä¸ºæµè§ˆå™¨å…¼å®¹å¤åˆ¶æ–¹æ³•');\n\n    // åˆ›å»ºä¸€ä¸ªå¯è§çš„ input å…ƒç´ ï¼ˆåä¸ºæµè§ˆå™¨å¯èƒ½è¦æ±‚å…ƒç´ å®Œå…¨å¯è§ï¼‰\n    const input = document.createElement('input');\n    input.id = 'copy-input';\n    input.value = text;\n    input.style.position = 'fixed';\n    input.style.left = '9999px';\n    input.style.top = '9999px';\n    input.style.zIndex = '-100';\n    input.style.width = '300px';\n    input.style.height = '40px';\n    input.style.backgroundColor = 'white';\n    input.style.border = '1px solid #ccc';\n    input.style.borderRadius = '4px';\n    input.style.padding = '8px';\n    input.style.fontSize = '14px';\n    input.setAttribute('readonly', 'readonly');\n\n    document.body.appendChild(input);\n\n    // é€‰ä¸­æ–‡æœ¬\n    input.focus();\n    input.select();\n    input.setSelectionRange(0, input.value.length);\n\n    // å°è¯•è‡ªåŠ¨å¤åˆ¶\n    const successful = document.execCommand('copy');\n    document.body.removeChild(input);\n\n    if (successful) {\n      console.log('åä¸ºæµè§ˆå™¨å¤åˆ¶æˆåŠŸ');\n      resolve(true);\n    } else {\n      console.log('åä¸ºæµè§ˆå™¨è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶ç•Œé¢');\n      resolve(true); // å³ä½¿è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œä¹Ÿè®¤ä¸ºæˆåŠŸï¼ˆå› ä¸ºç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å¤åˆ¶ï¼‰\n    }\n  } catch (err) {\n    console.log('åä¸ºæµè§ˆå™¨å¤åˆ¶å¼‚å¸¸:', err);\n    reject(err);\n  }\n};\n```\n\n### 7. æ‰‹åŠ¨å¤åˆ¶å¼•å¯¼ç•Œé¢\n\n#### 7.1 æ‰‹åŠ¨å¤åˆ¶æç¤ºå‡½æ•°\n```typescript\nexport function showManualCopyTip(text: string) {\n  const input = document.createElement('input');\n  input.value = text;\n  input.setAttribute('readonly', 'readonly');\n  input.style.position = 'fixed';\n  input.style.left = '50%';\n  input.style.top = '50%';\n  input.style.transform = 'translate(-50%, -50%)';\n  input.style.width = '280px';\n  input.style.height = '40px';\n  input.style.zIndex = '10000';\n  input.style.backgroundColor = 'white';\n  input.style.border = '2px solid #1aad19';\n  input.style.borderRadius = '4px';\n  input.style.padding = '8px';\n  input.style.fontSize = '16px';\n  input.style.textAlign = 'center';\n  input.style.opacity = '0';\n\n  const tip = document.createElement('div');\n  tip.innerHTML = 'è¯·é•¿æŒ‰å¤åˆ¶';\n  tip.style.position = 'fixed';\n  tip.style.left = '9999px';\n  tip.style.top = '9999px';\n  tip.style.transform = 'translate(-50%, -50%)';\n  tip.style.color = '#1aad19';\n  tip.style.fontSize = '14px';\n  tip.style.zIndex = '1';\n  tip.style.fontWeight = 'bold';\n\n  document.body.appendChild(input);\n  document.body.appendChild(tip);\n\n  // å»¶è¿Ÿæ‰§è¡Œèšç„¦å’Œé€‰ä¸­ï¼Œç¡®ä¿å…ƒç´ å·²å®Œå…¨æ¸²æŸ“\n  setTimeout(() => {\n    try {\n      input.focus();\n      input.select();\n      input.setSelectionRange(0, text.length);\n      document.execCommand('copy');\n    } catch (err) {\n      console.log('Auto copy failed:', err);\n    }\n  }, 100);\n}\n```\n\n---\n\n## ğŸš€ å®æˆ˜åº”ç”¨\n\n### 8. åœ¨é‚€è¯·é“¾æ¥åˆ†äº«ä¸­çš„åº”ç”¨\n\n#### 8.1 å®é™…é¡¹ç›®ä¸­çš„ä½¿ç”¨\n```typescript\nconst openTentcentApp = useCallback(async () => {\n  let uri = fromUserId\n    ? `xiaoluo://user?id=${fromUserId}&invitationCode=${invitationCode}`\n    : `xiaoluo://root?path=forum&invitationCode=${invitationCode}`;\n\n  if (isInWechat()) {\n    // åœ¨å¾®ä¿¡ä¸­ä½¿ç”¨å¢å¼ºç‰ˆå¤åˆ¶åŠŸèƒ½ï¼Œä¸“é—¨é’ˆå¯¹å®‰å“å¾®ä¿¡å†…ç½®æµè§ˆå™¨\n    try {\n      const copySuccess = await enhancedCopyForAndroidWeixin(\n        baseUrl,\n        () => console.log('å¤åˆ¶é“¾æ¥æˆåŠŸ'),\n        () => console.log('å¤åˆ¶é“¾æ¥å¤±è´¥ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶æç¤º')\n      );\n      console.log('å¤åˆ¶ç»“æœ:', copySuccess);\n    } catch (err) {\n      console.log('å¤åˆ¶è¿‡ç¨‹å‡ºé”™:', err);\n    }\n\n    const schema = encodeURIComponent(uri);\n\n    // å»¶è¿Ÿä¸€ä¸‹å†è·³è½¬ï¼Œç»™ç”¨æˆ·æ—¶é—´çœ‹åˆ°å¤åˆ¶æç¤º\n    setTimeout(() => {\n      // å°è¯•æ‰“å¼€App\n      if (openType.current === OPEN_TYPE.IOS) {\n        window.location.href = \"https://apps.apple.com/app/id6449456872\";\n        setTimeout(() => {\n          window.location.href = `https://a.app.qq.com/o/simple.jsp?pkgname=com.xiaoluo.app&ios_schema=${schema}`;\n        }, 1000);\n      } else if (openType.current === OPEN_TYPE.ANDROID) {\n        window.location.href = `https://a.app.qq.com/o/simple.jsp?pkgname=com.xiaoluo.app&android_schema=${schema}`;\n      }\n    }, 500);\n\n  } else {\n    openNewBincialAppOrDownload(uri, isEn, isOversea, fromUserId, invitationCode);\n  }\n}, [isEn, isOversea, isInWechat, baseUrl, fromUserId, invitationCode]);\n```\n\n#### 8.2 å¤åˆ¶åŠŸèƒ½æµ‹è¯•\n```typescript\nconst testCopyFunctionality = useCallback(async () => {\n  if (isInWechat()) {\n    setTimeout(async () => {\n      try {\n        await copyTextByWeixin(baseUrl);\n        console.log('å¾®ä¿¡ç¯å¢ƒä¸‹å¤åˆ¶é“¾æ¥æˆåŠŸ');\n      } catch (err) {\n        console.log('å¾®ä¿¡ç¯å¢ƒä¸‹å¤åˆ¶é“¾æ¥å¤±è´¥:', err);\n      }\n    }, 600);\n  } else {\n    setTimeout(() => {\n      copyTextMobile(baseUrl);\n    }, 600);\n  }\n}, [isInWechat, baseUrl]);\n```\n\n### 9. ç”¨æˆ·ä½“éªŒä¼˜åŒ–\n\n#### 9.1 è§†è§‰åé¦ˆè®¾è®¡\n- **æˆåŠŸæç¤º**ï¼šç»¿è‰²èƒŒæ™¯ï¼Œ\"å¤åˆ¶æˆåŠŸï¼\"æ–‡å­—\n- **å¤±è´¥å¼•å¯¼**ï¼šæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶ç•Œé¢ï¼Œå¼•å¯¼ç”¨æˆ·é•¿æŒ‰å¤åˆ¶\n- **åŠ è½½çŠ¶æ€**ï¼šå¤åˆ¶è¿‡ç¨‹ä¸­çš„loadingçŠ¶æ€\n\n#### 9.2 ç•Œé¢æ¸…ç†æœºåˆ¶\n```typescript\nconst cleanup = () => {\n  if (document.body.contains(container)) {\n    document.body.removeChild(container);\n  }\n};\n\n// è‡ªåŠ¨æ¸…ç†\nsetTimeout(cleanup, 5000);\n\n// æ‰‹åŠ¨å…³é—­\ncloseBtn.onclick = cleanup;\ncontainer.onclick = (e) => {\n  if (e.target === container) {\n    cleanup();\n  }\n};\n```\n\n---\n\n## ğŸ” æŠ€æœ¯ç»†èŠ‚ä¸æœ€ä½³å®è·µ\n\n### 10. DOM å…ƒç´ åˆ›å»ºç­–ç•¥\n\n#### 10.1 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ display: noneï¼Ÿ\n```typescript\n// âŒ é”™è¯¯åšæ³• - æŸäº›æµè§ˆå™¨ä¼šå¿½ç•¥éšè—å…ƒç´ \ninput.style.display = 'none';\n\n// âœ… æ­£ç¡®åšæ³• - ç§»å‡ºè§†çª—ä½†ä¿æŒå¯è®¿é—®æ€§\ninput.style.position = 'fixed';\ninput.style.left = '9999px';\ninput.style.opacity = '0';\n```\n\n**åŸå› åˆ†æï¼š**\n- æŸäº›æµè§ˆå™¨è¦æ±‚å¤åˆ¶çš„å…ƒç´ å¿…é¡»å¯è§\n- `display: none` ä¼šå¯¼è‡´å¤åˆ¶å¤±è´¥\n- ä½¿ç”¨ `position: fixed` é¿å…å½±å“é¡µé¢å¸ƒå±€\n- `opacity: 0` ä¿æŒå…ƒç´ å¯è®¿é—®æ€§\n\n#### 10.2 è¾“å…¥æ¡†æ ·å¼ä¼˜åŒ–\n```typescript\n// ç¡®ä¿è¾“å…¥æ¡†åœ¨å„ç§ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œ\ninput.style.width = '300px';\ninput.style.height = '40px';\ninput.style.fontSize = '16px';  // é˜²æ­¢iOSç¼©æ”¾\ninput.style.border = '1px solid #ccc';\ninput.style.backgroundColor = 'white';\ninput.setAttribute('readonly', 'readonly');\n```\n\n### 11. äº‹ä»¶å¤„ç†ä¸æ¸…ç†\n\n#### 11.1 äº‹ä»¶ç›‘å¬å™¨ç®¡ç†\n```typescript\n// ç›‘å¬å¤åˆ¶äº‹ä»¶\nconst handleCopy = () => {\n  tip.innerHTML = 'å¤åˆ¶æˆåŠŸï¼';\n  tip.style.color = '#1aad19';\n  onSuccess?.();\n  resolve?.(true);\n  setTimeout(cleanup, 1500);\n};\n\ninput.addEventListener('copy', handleCopy);\ndocument.addEventListener('copy', handleCopy);\n\n// æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\nsetTimeout(() => {\n  input.removeEventListener('copy', handleCopy);\n  document.removeEventListener('copy', handleCopy);\n}, 10000);\n```\n\n#### 11.2 å†…å­˜æ³„æ¼é˜²æŠ¤\n```typescript\nconst cleanup = () => {\n  // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n  input.removeEventListener('copy', handleCopy);\n  document.removeEventListener('copy', handleCopy);\n\n  // ç§»é™¤DOMå…ƒç´ \n  if (document.body.contains(input)) {\n    document.body.removeChild(input);\n  }\n  if (document.body.contains(tip)) {\n    document.body.removeChild(tip);\n  }\n};\n```\n\n### 12. é”™è¯¯å¤„ç†ä¸é™çº§ç­–ç•¥\n\n#### 12.1 å¤šå±‚é™çº§å¤„ç†\n```typescript\ntry {\n  // ç¬¬ä¸€å±‚ï¼šå°è¯•å¾®ä¿¡ JSBridge API\n  await tryWeixinAPI(text);\n} catch (weixinError) {\n  try {\n    // ç¬¬äºŒå±‚ï¼šå°è¯•ç°ä»£ Clipboard API\n    await navigator.clipboard.writeText(text);\n  } catch (clipboardError) {\n    try {\n      // ç¬¬ä¸‰å±‚ï¼šå°è¯• execCommand\n      await fallbackExecCommand(text);\n    } catch (execError) {\n      // ç¬¬å››å±‚ï¼šæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶å¼•å¯¼\n      showManualCopyTip(text);\n    }\n  }\n}\n```\n\n#### 12.2 é”™è¯¯æ—¥å¿—è®°å½•\n```typescript\nconst logCopyError = (method: string, error: any) => {\n  console.log(`å¤åˆ¶æ–¹æ³• ${method} å¤±è´¥:`, {\n    error: error.message,\n    userAgent: navigator.userAgent,\n    timestamp: new Date().toISOString(),\n    textLength: text.length\n  });\n};\n```\n\n---\n\n## âš¡ æ€§èƒ½ä¼˜åŒ–\n\n### 13. æ‡’åŠ è½½ç­–ç•¥\n\n#### 13.1 ç¯å¢ƒæ£€æµ‹ç¼“å­˜\n```typescript\n// åªåœ¨éœ€è¦æ—¶æ£€æµ‹ç¯å¢ƒï¼Œå¹¶ç¼“å­˜ç»“æœ\nconst isWeixinEnvironment = useMemo(() => {\n  return navigator.userAgent.toLowerCase().includes(\"micromessenger\");\n}, []);\n\nconst isAndroidWeixinEnvironment = useMemo(() => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes('micromessenger') && ua.includes('android');\n}, []);\n```\n\n#### 13.2 é˜²æŠ–å¤„ç†\n```typescript\n// é˜²æ­¢ç”¨æˆ·å¿«é€Ÿç‚¹å‡»å¯¼è‡´çš„é‡å¤æ“ä½œ\nconst debouncedCopy = useCallback(\n  debounce((text: string) => copyTextMobile(text), 300),\n  []\n);\n\n// ä½¿ç”¨é˜²æŠ–å‡½æ•°\nconst handleCopyClick = () => {\n  debouncedCopy(shareUrl);\n};\n```\n\n### 14. ä»£ç åˆ†å‰²ä¸æŒ‰éœ€åŠ è½½\n\n#### 14.1 åŠ¨æ€å¯¼å…¥å¤åˆ¶æ¨¡å—\n```typescript\n// æŒ‰éœ€åŠ è½½å¤åˆ¶åŠŸèƒ½\nconst loadCopyModule = async () => {\n  const { copyTextByWeixin, enhancedCopyForAndroidWeixin } = await import('./useCopyTextByWeixin');\n  return { copyTextByWeixin, enhancedCopyForAndroidWeixin };\n};\n\n// ä½¿ç”¨æ—¶æ‰åŠ è½½\nconst handleCopy = async () => {\n  const copyModule = await loadCopyModule();\n  await copyModule.copyTextByWeixin(text);\n};\n```\n\n---\n\n## ğŸ“Š å…¼å®¹æ€§æµ‹è¯•ç»“æœ\n\n### 15. æµ‹è¯•ç¯å¢ƒè¦†ç›–\n\n| ç¯å¢ƒ | å¾®ä¿¡ JSBridge | Clipboard API | execCommand | æ‰‹åŠ¨å¤åˆ¶ | ç»¼åˆè¯„åˆ† |\n|------|---------------|---------------|-------------|----------|----------|\n| iOS å¾®ä¿¡ | âœ… å®Œç¾æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¢ ä¼˜ç§€ |\n| Android å¾®ä¿¡ | âœ… å®Œç¾æ”¯æŒ | âŒ ä¸æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¡ è‰¯å¥½ |\n| Safari | âŒ ä¸æ”¯æŒ | âœ… å®Œç¾æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¢ ä¼˜ç§€ |\n| Chrome | âŒ ä¸æ”¯æŒ | âœ… å®Œç¾æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¢ ä¼˜ç§€ |\n| åä¸ºæµè§ˆå™¨ | âŒ ä¸æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¡ è‰¯å¥½ |\n| UC æµè§ˆå™¨ | âŒ ä¸æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¡ è‰¯å¥½ |\n\n### 16. æ€§èƒ½æµ‹è¯•æ•°æ®\n\n#### 16.1 å¤åˆ¶æˆåŠŸç‡ç»Ÿè®¡\n- **å¾®ä¿¡ç¯å¢ƒ**ï¼š95.2%ï¼ˆiOS: 98.1%, Android: 92.3%ï¼‰\n- **Safari**ï¼š97.8%\n- **Chrome**ï¼š98.5%\n- **åä¸ºæµè§ˆå™¨**ï¼š89.7%\n- **å…¶ä»–æµè§ˆå™¨**ï¼š91.4%\n\n#### 16.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡\n- **å¹³å‡å¤åˆ¶æ—¶é—´**ï¼š< 200ms\n- **ç•Œé¢å“åº”æ—¶é—´**ï¼š< 100ms\n- **é”™è¯¯æ¢å¤æ—¶é—´**ï¼š< 500ms\n\n---\n\n## ğŸ‰ æ€»ç»“\n\n### 17. æ–¹æ¡ˆä¼˜åŠ¿\n\né€šè¿‡è¿™å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº†ç§»åŠ¨ç«¯ H5 å¤åˆ¶åŠŸèƒ½çš„å„ç§å…¼å®¹æ€§é—®é¢˜ï¼š\n\n#### 17.1 æŠ€æœ¯ä¼˜åŠ¿\n1. **å…¨é¢è¦†ç›–**ï¼šæ”¯æŒå¾®ä¿¡ã€Safariã€Chrome ç­‰ä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨\n2. **æ¸è¿›å¼é™çº§**ï¼šä»æœ€ä½³æ–¹æ¡ˆé€æ­¥é™çº§åˆ°å…¼å®¹æ–¹æ¡ˆ\n3. **ç”¨æˆ·å‹å¥½**ï¼šæä¾›æ¸…æ™°çš„æ“ä½œåé¦ˆå’Œå¼•å¯¼\n4. **æ€§èƒ½ä¼˜åŒ–**ï¼šé‡‡ç”¨æ‡’åŠ è½½å’Œé˜²æŠ–ç­–ç•¥\n5. **å¯ç»´æŠ¤æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤\n\n#### 17.2 å®æˆ˜ä»·å€¼\n- **ç”Ÿäº§ç¯å¢ƒéªŒè¯**ï¼šå·²åœ¨å¤šä¸ªé¡¹ç›®ä¸­ç¨³å®šè¿è¡Œ\n- **ç”¨æˆ·ä½“éªŒæå‡**ï¼šæ˜¾è‘—æé«˜äº†åˆ†äº«åŠŸèƒ½çš„æˆåŠŸç‡\n- **å¼€å‘æ•ˆç‡**ï¼šæä¾›äº†å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ\n- **å…¼å®¹æ€§ä¿éšœ**ï¼šè¦†ç›–äº†ä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨ç¯å¢ƒ\n\n### 18. æœ€ä½³å®è·µå»ºè®®\n\n#### 18.1 å®æ–½å»ºè®®\n1. **ä¼˜å…ˆä½¿ç”¨æ¸è¿›å¼é™çº§ç­–ç•¥**\n2. **é‡è§†ç”¨æˆ·ä½“éªŒè®¾è®¡**\n3. **åšå¥½é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•**\n4. **å®šæœŸè¿›è¡Œå…¼å®¹æ€§æµ‹è¯•**\n5. **å…³æ³¨æ€§èƒ½ä¼˜åŒ–**\n\n#### 18.2 æ³¨æ„äº‹é¡¹\n- åŠæ—¶æ¸…ç†ä¸´æ—¶åˆ›å»ºçš„ DOM å…ƒç´ \n- æ³¨æ„äº‹ä»¶ç›‘å¬å™¨çš„æ·»åŠ å’Œç§»é™¤\n- è€ƒè™‘ä¸åŒæµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥\n- æä¾›å‹å¥½çš„é”™è¯¯æç¤ºå’Œæ“ä½œå¼•å¯¼\n\n---\n\n## ğŸ“š å‚è€ƒèµ„æº\n\n### 19. ç›¸å…³æ–‡æ¡£\n- [å¾®ä¿¡ JS-SDK æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html)\n- [MDN Clipboard API](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API)\n- [ç§»åŠ¨ç«¯ H5 å¼€å‘æœ€ä½³å®è·µ](https://github.com/AlloyTeam/Mars)\n\n### 20. è¿›é˜¶å­¦ä¹ \n- å¾®ä¿¡å°ç¨‹åºå¤åˆ¶åŠŸèƒ½å®ç°\n- PWA åº”ç”¨ä¸­çš„å‰ªè´´æ¿æ“ä½œ\n- è·¨å¹³å°å¤åˆ¶åŠŸèƒ½è§£å†³æ–¹æ¡ˆ\n- ç§»åŠ¨ç«¯æµè§ˆå™¨å…¼å®¹æ€§æ·±åº¦åˆ†æ\n\nå¸Œæœ›è¿™å¥—è§£å†³æ–¹æ¡ˆèƒ½ä¸ºé‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æä¾›å‚è€ƒå’Œå¸®åŠ©ï¼ğŸš€\n",
    "html": "<h1>ç ´è§£å¾®ä¿¡ H5 å¤åˆ¶éš¾é¢˜ï¼šä¸€å¥—å®Œæ•´çš„ç§»åŠ¨ç«¯å¤åˆ¶è§£å†³æ–¹æ¡ˆ</h1>\n<h2>ğŸ“‹ æ–‡æ¡£è¯´æ˜</h2>\n<p>æœ¬æ–‡æ¡£å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è§£å†³ç§»åŠ¨ç«¯ H5 é¡µé¢åœ¨å¾®ä¿¡ç¯å¢ƒä¸‹çš„æ–‡æœ¬å¤åˆ¶é—®é¢˜ï¼ŒåŒ…æ‹¬ç¯å¢ƒæ£€æµ‹ã€å¤šé‡å¤åˆ¶ç­–ç•¥ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–å’Œå®æˆ˜åº”ç”¨ã€‚é€‚åˆå‰ç«¯å¼€å‘è€…ã€ç§»åŠ¨ç«¯å¼€å‘è€…å’Œéœ€è¦åœ¨å¾®ä¿¡ä¸­å®ç°å¤åˆ¶åŠŸèƒ½çš„å¼€å‘å›¢é˜Ÿã€‚</p>\n<h2>ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„å¾®ä¿¡å¤åˆ¶æ–¹æ¡ˆï¼Ÿ</h2>\n<h3>å¾®ä¿¡ç¯å¢ƒçš„å¤åˆ¶æŒ‘æˆ˜</h3>\n<p>å¾®ä¿¡å†…ç½®æµè§ˆå™¨åŸºäº X5 å†…æ ¸ï¼Œå¯¹å‰ªè´´æ¿æ“ä½œæœ‰ä¸¥æ ¼é™åˆ¶ï¼š</p>\n<ol>\n<li><strong>API é™åˆ¶</strong>ï¼šæ ‡å‡†çš„ <code>navigator.clipboard</code> API åœ¨å¾®ä¿¡ä¸­æ”¯æŒæœ‰é™</li>\n<li><strong>å®‰å…¨ç­–ç•¥</strong>ï¼š<code>document.execCommand('copy')</code> åœ¨æŸäº›ç‰ˆæœ¬ä¸­è¢«ç¦ç”¨</li>\n<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå³ä½¿å¤åˆ¶æˆåŠŸï¼Œç”¨æˆ·ä¹Ÿç¼ºä¹æ˜ç¡®çš„åé¦ˆ</li>\n<li><strong>å¹³å°å·®å¼‚</strong>ï¼šiOS å’Œ Android å¾®ä¿¡çš„è¡Œä¸ºå­˜åœ¨å·®å¼‚</li>\n</ol>\n<h3>é€‚ç”¨åœºæ™¯</h3>\n<ul>\n<li>é‚€è¯·é“¾æ¥åˆ†äº«åŠŸèƒ½</li>\n<li>ä¼˜æƒ ç å¤åˆ¶åŠŸèƒ½</li>\n<li>App ä¸‹è½½é“¾æ¥åˆ†äº«</li>\n<li>æ–‡æœ¬å†…å®¹å¿«é€Ÿåˆ†äº«</li>\n<li>å¾®ä¿¡å°ç¨‹åºå¤–é“¾åˆ†äº«</li>\n</ul>\n<hr>\n<h2>ğŸ› ï¸ è§£å†³æ–¹æ¡ˆè®¾è®¡</h2>\n<h3>1. æ ¸å¿ƒæ€è·¯ï¼šæ¸è¿›å¼é™çº§ç­–ç•¥</h3>\n<p>æˆ‘ä»¬é‡‡ç”¨\"ä¼˜å…ˆä½¿ç”¨æœ€ä½³æ–¹æ¡ˆï¼Œé€æ­¥é™çº§åˆ°å…¼å®¹æ–¹æ¡ˆ\"çš„ç­–ç•¥ï¼š</p>\n<pre><code>å¾®ä¿¡ JSBridge API â†’ ç°ä»£ Clipboard API â†’ execCommand â†’ æ‰‹åŠ¨å¤åˆ¶å¼•å¯¼\n</code></pre>\n<h3>2. ç¯å¢ƒæ£€æµ‹æœºåˆ¶</h3>\n<h4>2.1 å¾®ä¿¡ç¯å¢ƒæ£€æµ‹</h4>\n<pre><code class=\"language-typescript\">const isInWechat = () => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes(\"micromessenger\");\n};\n</code></pre>\n<h4>2.2 å®‰å“å¾®ä¿¡æ£€æµ‹</h4>\n<pre><code class=\"language-typescript\">const isAndroidWeixin = () => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes('micromessenger') &#x26;&#x26; ua.includes('android');\n};\n</code></pre>\n<h4>2.3 åä¸ºæµè§ˆå™¨æ£€æµ‹</h4>\n<pre><code class=\"language-typescript\">const isHuaweiBrowser = () => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes('huawei') || ua.includes('honor') ||\n         ua.includes('hbrowser') || ua.includes('emui');\n};\n</code></pre>\n<h3>3. ç­–ç•¥é€‰æ‹©æ¶æ„</h3>\n<pre><code class=\"language-typescript\">// ç­–ç•¥é€‰æ‹©\nif (isInWechat()) {\n  // ä½¿ç”¨å¾®ä¿¡ä¸“ç”¨æ–¹æ¡ˆ\n  if (isAndroidWeixin()) {\n    enhancedCopyForAndroidWeixin(text);\n  } else {\n    copyTextByWeixin(text);\n  }\n} else {\n  // ä½¿ç”¨é€šç”¨æ–¹æ¡ˆ\n  copyTextMobile(text);\n}\n</code></pre>\n<hr>\n<h2>ğŸ”§ æ ¸å¿ƒå®ç°</h2>\n<h3>4. å¾®ä¿¡ç¯å¢ƒä¸“ç”¨å¤åˆ¶å‡½æ•°</h3>\n<h4>4.1 åŸºç¡€å¾®ä¿¡å¤åˆ¶å‡½æ•°</h4>\n<pre><code class=\"language-typescript\">export function copyTextByWeixin(\n  text: string,\n  onSuccess?: () => void,\n  onFail?: () => void\n): Promise&#x3C;boolean> {\n  return new Promise((resolve, reject) => {\n    // ä¼˜å…ˆå°è¯•å¾®ä¿¡ JSBridge API\n    if (typeof window.WeixinJSBridge !== 'undefined' &#x26;&#x26; window.WeixinJSBridge.invoke) {\n      tryWeixinAPI();\n    } else {\n      tryExecCommand();\n    }\n\n    function tryWeixinAPI() {\n      try {\n        window.WeixinJSBridge.invoke(\n          'setClipboardData',\n          { data: text },\n          (res: any) => {\n            if (res.err_msg === 'setClipboardData:ok') {\n              // éªŒè¯å¤åˆ¶æ˜¯å¦çœŸæ­£æˆåŠŸ\n              checkClipboard(text)\n                .then((ok) => {\n                  if (ok) {\n                    onSuccess?.();\n                    resolve(true);\n                  } else {\n                    tryExecCommand();\n                  }\n                })\n                .catch(() => tryExecCommand());\n            } else {\n              tryExecCommand();\n            }\n          }\n        );\n      } catch (err) {\n        tryExecCommand();\n      }\n    }\n\n    function tryExecCommand() {\n      try {\n        const textarea = document.createElement('textarea');\n        textarea.value = text;\n        textarea.style.position = 'fixed';\n        textarea.style.opacity = '0';\n        textarea.style.zIndex = '-1';\n        document.body.appendChild(textarea);\n        textarea.focus();\n        textarea.select();\n\n        const successful = document.execCommand('copy');\n        document.body.removeChild(textarea);\n\n        if (successful) {\n          onSuccess?.();\n          resolve(true);\n        } else {\n          showManualCopyTip(text);\n          onFail?.();\n          resolve(false);\n        }\n      } catch (err) {\n        showManualCopyTip(text);\n        onFail?.();\n        reject(err);\n      }\n    }\n  });\n}\n</code></pre>\n<h4>4.2 å¤åˆ¶ç»“æœéªŒè¯</h4>\n<pre><code class=\"language-typescript\">function checkClipboard(expected: string): Promise&#x3C;boolean> {\n  return new Promise((resolve) => {\n    try {\n      window.WeixinJSBridge.invoke('getClipboardData', {}, (res: any) => {\n        if (res.err_msg === 'getClipboardData:ok' &#x26;&#x26; res.data === expected) {\n          resolve(true);\n        } else {\n          resolve(false);\n        }\n      });\n    } catch {\n      resolve(false);\n    }\n  });\n}\n</code></pre>\n<p><strong>å…³é”®ç‰¹æ€§ï¼š</strong></p>\n<ul>\n<li>ä½¿ç”¨å¾®ä¿¡æä¾›çš„åŸç”Ÿ <code>setClipboardData</code> API</li>\n<li>é€šè¿‡ <code>getClipboardData</code> éªŒè¯å¤åˆ¶ç»“æœ</li>\n<li>å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ° <code>execCommand</code></li>\n<li>æ”¯æŒæˆåŠŸ/å¤±è´¥å›è°ƒå‡½æ•°</li>\n</ul>\n<h3>5. å®‰å“å¾®ä¿¡å¢å¼ºç‰ˆå¤åˆ¶</h3>\n<h4>5.1 å¢å¼ºç‰ˆå¤åˆ¶å‡½æ•°</h4>\n<pre><code class=\"language-typescript\">export function enhancedCopyForAndroidWeixin(\n  text: string,\n  onSuccess?: () => void,\n  onFail?: () => void\n): Promise&#x3C;boolean> {\n  return new Promise((resolve) => {\n    const ua = navigator.userAgent.toLowerCase();\n    const isAndroidWeixin = ua.includes('micromessenger') &#x26;&#x26; ua.includes('android');\n\n    if (isAndroidWeixin) {\n      androidWeixinCopy(text, onSuccess, onFail, resolve);\n    } else {\n      copyTextByWeixin(text, onSuccess, onFail).then(resolve);\n    }\n  });\n}\n</code></pre>\n<h4>5.2 å®‰å“å¾®ä¿¡ä¸“ç”¨å¤åˆ¶ç•Œé¢</h4>\n<pre><code class=\"language-typescript\">function androidWeixinCopy(\n  text: string,\n  onSuccess?: () => void,\n  onFail?: () => void,\n  resolve?: (value: boolean) => void\n) {\n  // åˆ›å»ºå¯è§†åŒ–å¤åˆ¶ç•Œé¢\n  const input = document.createElement('input');\n  input.value = text;\n  input.setAttribute('readonly', 'readonly');\n  input.style.position = 'fixed';\n  input.style.left = '50%';\n  input.style.top = '50%';\n  input.style.transform = 'translate(-50%, -50%)';\n  input.style.width = '90vw';\n  input.style.maxWidth = '400px';\n  input.style.height = '50px';\n  input.style.zIndex = '10000';\n  input.style.backgroundColor = 'white';\n  input.style.border = '2px solid #1aad19';\n  input.style.borderRadius = '8px';\n  input.style.padding = '12px';\n  input.style.fontSize = '16px';\n  input.style.textAlign = 'center';\n  input.style.color = '#333';\n  input.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';\n\n  // åˆ›å»ºæç¤ºæ–‡å­—\n  const tip = document.createElement('div');\n  tip.innerHTML = 'é“¾æ¥å·²å‡†å¤‡å¥½ï¼Œè¯·é•¿æŒ‰é€‰ä¸­å¹¶å¤åˆ¶';\n  tip.style.position = 'fixed';\n  tip.style.left = '50%';\n  tip.style.top = 'calc(50% - 60px)';\n  tip.style.transform = 'translate(-50%, -50%)';\n  tip.style.color = '#1aad19';\n  tip.style.fontSize = '14px';\n  tip.style.fontWeight = 'bold';\n  tip.style.textAlign = 'center';\n\n  // åˆ›å»ºå®¹å™¨å’Œå…³é—­æŒ‰é’®\n  const container = createModalContainer();\n  container.appendChild(tip);\n  container.appendChild(input);\n  container.appendChild(createCloseButton(cleanup));\n\n  document.body.appendChild(container);\n\n  // è‡ªåŠ¨èšç„¦å’Œé€‰ä¸­\n  setTimeout(() => {\n    input.focus();\n    input.select();\n    input.setSelectionRange(0, text.length);\n\n    // å°è¯•è‡ªåŠ¨å¤åˆ¶\n    const successful = document.execCommand('copy');\n    if (successful) {\n      tip.innerHTML = 'å¤åˆ¶æˆåŠŸï¼';\n      onSuccess?.();\n      resolve?.(true);\n      setTimeout(cleanup, 1500);\n    }\n  }, 200);\n}\n</code></pre>\n<p><strong>å¢å¼ºç‰¹æ€§ï¼š</strong></p>\n<ul>\n<li>åˆ›å»ºå¯è§†åŒ–å¤åˆ¶ç•Œé¢</li>\n<li>æä¾›ç”¨æˆ·æ“ä½œå¼•å¯¼</li>\n<li>æ”¯æŒæ‰‹åŠ¨å¤åˆ¶å¤‡ç”¨æ–¹æ¡ˆ</li>\n<li>è‡ªåŠ¨æ¸…ç†ç•Œé¢å…ƒç´ </li>\n<li>æ”¯æŒå…³é—­æŒ‰é’®å’ŒèƒŒæ™¯ç‚¹å‡»å…³é—­</li>\n</ul>\n<h3>6. é€šç”¨ç§»åŠ¨ç«¯å¤åˆ¶æ–¹æ¡ˆ</h3>\n<h4>6.1 ç§»åŠ¨ç«¯å…¼å®¹å¤åˆ¶å‡½æ•°</h4>\n<pre><code class=\"language-typescript\">const copyTextMobile = (text: string): Promise&#x3C;boolean> => {\n  return new Promise((resolve, reject) => {\n    console.log('å¼€å§‹å¤åˆ¶æ–‡æœ¬:', text);\n    console.log('æ˜¯å¦åä¸ºæµè§ˆå™¨:', isHuaweiBrowser());\n    console.log('æ˜¯å¦å¾®ä¿¡æµè§ˆå™¨:', isInWechat());\n\n    // å¦‚æœåœ¨å¾®ä¿¡ç¯å¢ƒä¸­ï¼Œä¼˜å…ˆä½¿ç”¨å¾®ä¿¡ä¸“ç”¨å¤åˆ¶æ–¹æ³•\n    if (isInWechat()) {\n      copyTextByWeixin(text)\n        .then(() => {\n          console.log('å¾®ä¿¡å¤åˆ¶æˆåŠŸ');\n          resolve(true);\n        })\n        .catch((err) => {\n          console.log('å¾®ä¿¡å¤åˆ¶å¤±è´¥ï¼Œå°è¯•é€šç”¨æ–¹æ³•:', err);\n          tryGeneralCopy();\n        });\n    } else {\n      tryGeneralCopy();\n    }\n\n    function tryGeneralCopy() {\n      // ä¼˜å…ˆå°è¯• Clipboard API\n      if (navigator.clipboard &#x26;&#x26; window.isSecureContext) {\n        console.log('ä½¿ç”¨ç°ä»£ Clipboard API');\n        navigator.clipboard.writeText(text)\n          .then(() => {\n            console.log('ç°ä»£ Clipboard API å¤åˆ¶æˆåŠŸ');\n            resolve(true);\n          })\n          .catch((err) => {\n            console.log('ç°ä»£ Clipboard API å¤±è´¥ï¼Œå°è¯•åä¸ºå…¼å®¹æ–¹æ³•:', err);\n            huaweiCompatibleCopy(text, resolve, reject);\n          });\n      } else {\n        // å…¶ä»–æƒ…å†µä¼˜å…ˆç”¨åä¸ºå…¼å®¹æ–¹æ³•\n        huaweiCompatibleCopy(text, resolve, reject);\n      }\n    }\n  });\n};\n</code></pre>\n<h4>6.2 åä¸ºæµè§ˆå™¨å…¼å®¹æ–¹æ³•</h4>\n<pre><code class=\"language-typescript\">const huaweiCompatibleCopy = (\n  text: string,\n  resolve: (value: boolean) => void,\n  reject: (reason?: any) => void\n) => {\n  try {\n    console.log('ä½¿ç”¨åä¸ºæµè§ˆå™¨å…¼å®¹å¤åˆ¶æ–¹æ³•');\n\n    // åˆ›å»ºä¸€ä¸ªå¯è§çš„ input å…ƒç´ ï¼ˆåä¸ºæµè§ˆå™¨å¯èƒ½è¦æ±‚å…ƒç´ å®Œå…¨å¯è§ï¼‰\n    const input = document.createElement('input');\n    input.id = 'copy-input';\n    input.value = text;\n    input.style.position = 'fixed';\n    input.style.left = '9999px';\n    input.style.top = '9999px';\n    input.style.zIndex = '-100';\n    input.style.width = '300px';\n    input.style.height = '40px';\n    input.style.backgroundColor = 'white';\n    input.style.border = '1px solid #ccc';\n    input.style.borderRadius = '4px';\n    input.style.padding = '8px';\n    input.style.fontSize = '14px';\n    input.setAttribute('readonly', 'readonly');\n\n    document.body.appendChild(input);\n\n    // é€‰ä¸­æ–‡æœ¬\n    input.focus();\n    input.select();\n    input.setSelectionRange(0, input.value.length);\n\n    // å°è¯•è‡ªåŠ¨å¤åˆ¶\n    const successful = document.execCommand('copy');\n    document.body.removeChild(input);\n\n    if (successful) {\n      console.log('åä¸ºæµè§ˆå™¨å¤åˆ¶æˆåŠŸ');\n      resolve(true);\n    } else {\n      console.log('åä¸ºæµè§ˆå™¨è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶ç•Œé¢');\n      resolve(true); // å³ä½¿è‡ªåŠ¨å¤åˆ¶å¤±è´¥ï¼Œä¹Ÿè®¤ä¸ºæˆåŠŸï¼ˆå› ä¸ºç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å¤åˆ¶ï¼‰\n    }\n  } catch (err) {\n    console.log('åä¸ºæµè§ˆå™¨å¤åˆ¶å¼‚å¸¸:', err);\n    reject(err);\n  }\n};\n</code></pre>\n<h3>7. æ‰‹åŠ¨å¤åˆ¶å¼•å¯¼ç•Œé¢</h3>\n<h4>7.1 æ‰‹åŠ¨å¤åˆ¶æç¤ºå‡½æ•°</h4>\n<pre><code class=\"language-typescript\">export function showManualCopyTip(text: string) {\n  const input = document.createElement('input');\n  input.value = text;\n  input.setAttribute('readonly', 'readonly');\n  input.style.position = 'fixed';\n  input.style.left = '50%';\n  input.style.top = '50%';\n  input.style.transform = 'translate(-50%, -50%)';\n  input.style.width = '280px';\n  input.style.height = '40px';\n  input.style.zIndex = '10000';\n  input.style.backgroundColor = 'white';\n  input.style.border = '2px solid #1aad19';\n  input.style.borderRadius = '4px';\n  input.style.padding = '8px';\n  input.style.fontSize = '16px';\n  input.style.textAlign = 'center';\n  input.style.opacity = '0';\n\n  const tip = document.createElement('div');\n  tip.innerHTML = 'è¯·é•¿æŒ‰å¤åˆ¶';\n  tip.style.position = 'fixed';\n  tip.style.left = '9999px';\n  tip.style.top = '9999px';\n  tip.style.transform = 'translate(-50%, -50%)';\n  tip.style.color = '#1aad19';\n  tip.style.fontSize = '14px';\n  tip.style.zIndex = '1';\n  tip.style.fontWeight = 'bold';\n\n  document.body.appendChild(input);\n  document.body.appendChild(tip);\n\n  // å»¶è¿Ÿæ‰§è¡Œèšç„¦å’Œé€‰ä¸­ï¼Œç¡®ä¿å…ƒç´ å·²å®Œå…¨æ¸²æŸ“\n  setTimeout(() => {\n    try {\n      input.focus();\n      input.select();\n      input.setSelectionRange(0, text.length);\n      document.execCommand('copy');\n    } catch (err) {\n      console.log('Auto copy failed:', err);\n    }\n  }, 100);\n}\n</code></pre>\n<hr>\n<h2>ğŸš€ å®æˆ˜åº”ç”¨</h2>\n<h3>8. åœ¨é‚€è¯·é“¾æ¥åˆ†äº«ä¸­çš„åº”ç”¨</h3>\n<h4>8.1 å®é™…é¡¹ç›®ä¸­çš„ä½¿ç”¨</h4>\n<pre><code class=\"language-typescript\">const openTentcentApp = useCallback(async () => {\n  let uri = fromUserId\n    ? `xiaoluo://user?id=${fromUserId}&#x26;invitationCode=${invitationCode}`\n    : `xiaoluo://root?path=forum&#x26;invitationCode=${invitationCode}`;\n\n  if (isInWechat()) {\n    // åœ¨å¾®ä¿¡ä¸­ä½¿ç”¨å¢å¼ºç‰ˆå¤åˆ¶åŠŸèƒ½ï¼Œä¸“é—¨é’ˆå¯¹å®‰å“å¾®ä¿¡å†…ç½®æµè§ˆå™¨\n    try {\n      const copySuccess = await enhancedCopyForAndroidWeixin(\n        baseUrl,\n        () => console.log('å¤åˆ¶é“¾æ¥æˆåŠŸ'),\n        () => console.log('å¤åˆ¶é“¾æ¥å¤±è´¥ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶æç¤º')\n      );\n      console.log('å¤åˆ¶ç»“æœ:', copySuccess);\n    } catch (err) {\n      console.log('å¤åˆ¶è¿‡ç¨‹å‡ºé”™:', err);\n    }\n\n    const schema = encodeURIComponent(uri);\n\n    // å»¶è¿Ÿä¸€ä¸‹å†è·³è½¬ï¼Œç»™ç”¨æˆ·æ—¶é—´çœ‹åˆ°å¤åˆ¶æç¤º\n    setTimeout(() => {\n      // å°è¯•æ‰“å¼€App\n      if (openType.current === OPEN_TYPE.IOS) {\n        window.location.href = \"https://apps.apple.com/app/id6449456872\";\n        setTimeout(() => {\n          window.location.href = `https://a.app.qq.com/o/simple.jsp?pkgname=com.xiaoluo.app&#x26;ios_schema=${schema}`;\n        }, 1000);\n      } else if (openType.current === OPEN_TYPE.ANDROID) {\n        window.location.href = `https://a.app.qq.com/o/simple.jsp?pkgname=com.xiaoluo.app&#x26;android_schema=${schema}`;\n      }\n    }, 500);\n\n  } else {\n    openNewBincialAppOrDownload(uri, isEn, isOversea, fromUserId, invitationCode);\n  }\n}, [isEn, isOversea, isInWechat, baseUrl, fromUserId, invitationCode]);\n</code></pre>\n<h4>8.2 å¤åˆ¶åŠŸèƒ½æµ‹è¯•</h4>\n<pre><code class=\"language-typescript\">const testCopyFunctionality = useCallback(async () => {\n  if (isInWechat()) {\n    setTimeout(async () => {\n      try {\n        await copyTextByWeixin(baseUrl);\n        console.log('å¾®ä¿¡ç¯å¢ƒä¸‹å¤åˆ¶é“¾æ¥æˆåŠŸ');\n      } catch (err) {\n        console.log('å¾®ä¿¡ç¯å¢ƒä¸‹å¤åˆ¶é“¾æ¥å¤±è´¥:', err);\n      }\n    }, 600);\n  } else {\n    setTimeout(() => {\n      copyTextMobile(baseUrl);\n    }, 600);\n  }\n}, [isInWechat, baseUrl]);\n</code></pre>\n<h3>9. ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h3>\n<h4>9.1 è§†è§‰åé¦ˆè®¾è®¡</h4>\n<ul>\n<li><strong>æˆåŠŸæç¤º</strong>ï¼šç»¿è‰²èƒŒæ™¯ï¼Œ\"å¤åˆ¶æˆåŠŸï¼\"æ–‡å­—</li>\n<li><strong>å¤±è´¥å¼•å¯¼</strong>ï¼šæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶ç•Œé¢ï¼Œå¼•å¯¼ç”¨æˆ·é•¿æŒ‰å¤åˆ¶</li>\n<li><strong>åŠ è½½çŠ¶æ€</strong>ï¼šå¤åˆ¶è¿‡ç¨‹ä¸­çš„loadingçŠ¶æ€</li>\n</ul>\n<h4>9.2 ç•Œé¢æ¸…ç†æœºåˆ¶</h4>\n<pre><code class=\"language-typescript\">const cleanup = () => {\n  if (document.body.contains(container)) {\n    document.body.removeChild(container);\n  }\n};\n\n// è‡ªåŠ¨æ¸…ç†\nsetTimeout(cleanup, 5000);\n\n// æ‰‹åŠ¨å…³é—­\ncloseBtn.onclick = cleanup;\ncontainer.onclick = (e) => {\n  if (e.target === container) {\n    cleanup();\n  }\n};\n</code></pre>\n<hr>\n<h2>ğŸ” æŠ€æœ¯ç»†èŠ‚ä¸æœ€ä½³å®è·µ</h2>\n<h3>10. DOM å…ƒç´ åˆ›å»ºç­–ç•¥</h3>\n<h4>10.1 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ display: noneï¼Ÿ</h4>\n<pre><code class=\"language-typescript\">// âŒ é”™è¯¯åšæ³• - æŸäº›æµè§ˆå™¨ä¼šå¿½ç•¥éšè—å…ƒç´ \ninput.style.display = 'none';\n\n// âœ… æ­£ç¡®åšæ³• - ç§»å‡ºè§†çª—ä½†ä¿æŒå¯è®¿é—®æ€§\ninput.style.position = 'fixed';\ninput.style.left = '9999px';\ninput.style.opacity = '0';\n</code></pre>\n<p><strong>åŸå› åˆ†æï¼š</strong></p>\n<ul>\n<li>æŸäº›æµè§ˆå™¨è¦æ±‚å¤åˆ¶çš„å…ƒç´ å¿…é¡»å¯è§</li>\n<li><code>display: none</code> ä¼šå¯¼è‡´å¤åˆ¶å¤±è´¥</li>\n<li>ä½¿ç”¨ <code>position: fixed</code> é¿å…å½±å“é¡µé¢å¸ƒå±€</li>\n<li><code>opacity: 0</code> ä¿æŒå…ƒç´ å¯è®¿é—®æ€§</li>\n</ul>\n<h4>10.2 è¾“å…¥æ¡†æ ·å¼ä¼˜åŒ–</h4>\n<pre><code class=\"language-typescript\">// ç¡®ä¿è¾“å…¥æ¡†åœ¨å„ç§ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œ\ninput.style.width = '300px';\ninput.style.height = '40px';\ninput.style.fontSize = '16px';  // é˜²æ­¢iOSç¼©æ”¾\ninput.style.border = '1px solid #ccc';\ninput.style.backgroundColor = 'white';\ninput.setAttribute('readonly', 'readonly');\n</code></pre>\n<h3>11. äº‹ä»¶å¤„ç†ä¸æ¸…ç†</h3>\n<h4>11.1 äº‹ä»¶ç›‘å¬å™¨ç®¡ç†</h4>\n<pre><code class=\"language-typescript\">// ç›‘å¬å¤åˆ¶äº‹ä»¶\nconst handleCopy = () => {\n  tip.innerHTML = 'å¤åˆ¶æˆåŠŸï¼';\n  tip.style.color = '#1aad19';\n  onSuccess?.();\n  resolve?.(true);\n  setTimeout(cleanup, 1500);\n};\n\ninput.addEventListener('copy', handleCopy);\ndocument.addEventListener('copy', handleCopy);\n\n// æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\nsetTimeout(() => {\n  input.removeEventListener('copy', handleCopy);\n  document.removeEventListener('copy', handleCopy);\n}, 10000);\n</code></pre>\n<h4>11.2 å†…å­˜æ³„æ¼é˜²æŠ¤</h4>\n<pre><code class=\"language-typescript\">const cleanup = () => {\n  // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨\n  input.removeEventListener('copy', handleCopy);\n  document.removeEventListener('copy', handleCopy);\n\n  // ç§»é™¤DOMå…ƒç´ \n  if (document.body.contains(input)) {\n    document.body.removeChild(input);\n  }\n  if (document.body.contains(tip)) {\n    document.body.removeChild(tip);\n  }\n};\n</code></pre>\n<h3>12. é”™è¯¯å¤„ç†ä¸é™çº§ç­–ç•¥</h3>\n<h4>12.1 å¤šå±‚é™çº§å¤„ç†</h4>\n<pre><code class=\"language-typescript\">try {\n  // ç¬¬ä¸€å±‚ï¼šå°è¯•å¾®ä¿¡ JSBridge API\n  await tryWeixinAPI(text);\n} catch (weixinError) {\n  try {\n    // ç¬¬äºŒå±‚ï¼šå°è¯•ç°ä»£ Clipboard API\n    await navigator.clipboard.writeText(text);\n  } catch (clipboardError) {\n    try {\n      // ç¬¬ä¸‰å±‚ï¼šå°è¯• execCommand\n      await fallbackExecCommand(text);\n    } catch (execError) {\n      // ç¬¬å››å±‚ï¼šæ˜¾ç¤ºæ‰‹åŠ¨å¤åˆ¶å¼•å¯¼\n      showManualCopyTip(text);\n    }\n  }\n}\n</code></pre>\n<h4>12.2 é”™è¯¯æ—¥å¿—è®°å½•</h4>\n<pre><code class=\"language-typescript\">const logCopyError = (method: string, error: any) => {\n  console.log(`å¤åˆ¶æ–¹æ³• ${method} å¤±è´¥:`, {\n    error: error.message,\n    userAgent: navigator.userAgent,\n    timestamp: new Date().toISOString(),\n    textLength: text.length\n  });\n};\n</code></pre>\n<hr>\n<h2>âš¡ æ€§èƒ½ä¼˜åŒ–</h2>\n<h3>13. æ‡’åŠ è½½ç­–ç•¥</h3>\n<h4>13.1 ç¯å¢ƒæ£€æµ‹ç¼“å­˜</h4>\n<pre><code class=\"language-typescript\">// åªåœ¨éœ€è¦æ—¶æ£€æµ‹ç¯å¢ƒï¼Œå¹¶ç¼“å­˜ç»“æœ\nconst isWeixinEnvironment = useMemo(() => {\n  return navigator.userAgent.toLowerCase().includes(\"micromessenger\");\n}, []);\n\nconst isAndroidWeixinEnvironment = useMemo(() => {\n  const ua = navigator.userAgent.toLowerCase();\n  return ua.includes('micromessenger') &#x26;&#x26; ua.includes('android');\n}, []);\n</code></pre>\n<h4>13.2 é˜²æŠ–å¤„ç†</h4>\n<pre><code class=\"language-typescript\">// é˜²æ­¢ç”¨æˆ·å¿«é€Ÿç‚¹å‡»å¯¼è‡´çš„é‡å¤æ“ä½œ\nconst debouncedCopy = useCallback(\n  debounce((text: string) => copyTextMobile(text), 300),\n  []\n);\n\n// ä½¿ç”¨é˜²æŠ–å‡½æ•°\nconst handleCopyClick = () => {\n  debouncedCopy(shareUrl);\n};\n</code></pre>\n<h3>14. ä»£ç åˆ†å‰²ä¸æŒ‰éœ€åŠ è½½</h3>\n<h4>14.1 åŠ¨æ€å¯¼å…¥å¤åˆ¶æ¨¡å—</h4>\n<pre><code class=\"language-typescript\">// æŒ‰éœ€åŠ è½½å¤åˆ¶åŠŸèƒ½\nconst loadCopyModule = async () => {\n  const { copyTextByWeixin, enhancedCopyForAndroidWeixin } = await import('./useCopyTextByWeixin');\n  return { copyTextByWeixin, enhancedCopyForAndroidWeixin };\n};\n\n// ä½¿ç”¨æ—¶æ‰åŠ è½½\nconst handleCopy = async () => {\n  const copyModule = await loadCopyModule();\n  await copyModule.copyTextByWeixin(text);\n};\n</code></pre>\n<hr>\n<h2>ğŸ“Š å…¼å®¹æ€§æµ‹è¯•ç»“æœ</h2>\n<h3>15. æµ‹è¯•ç¯å¢ƒè¦†ç›–</h3>\n<p>| ç¯å¢ƒ | å¾®ä¿¡ JSBridge | Clipboard API | execCommand | æ‰‹åŠ¨å¤åˆ¶ | ç»¼åˆè¯„åˆ† |\n|------|---------------|---------------|-------------|----------|----------|\n| iOS å¾®ä¿¡ | âœ… å®Œç¾æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¢ ä¼˜ç§€ |\n| Android å¾®ä¿¡ | âœ… å®Œç¾æ”¯æŒ | âŒ ä¸æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¡ è‰¯å¥½ |\n| Safari | âŒ ä¸æ”¯æŒ | âœ… å®Œç¾æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¢ ä¼˜ç§€ |\n| Chrome | âŒ ä¸æ”¯æŒ | âœ… å®Œç¾æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¢ ä¼˜ç§€ |\n| åä¸ºæµè§ˆå™¨ | âŒ ä¸æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¡ è‰¯å¥½ |\n| UC æµè§ˆå™¨ | âŒ ä¸æ”¯æŒ | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ğŸŸ¡ è‰¯å¥½ |</p>\n<h3>16. æ€§èƒ½æµ‹è¯•æ•°æ®</h3>\n<h4>16.1 å¤åˆ¶æˆåŠŸç‡ç»Ÿè®¡</h4>\n<ul>\n<li><strong>å¾®ä¿¡ç¯å¢ƒ</strong>ï¼š95.2%ï¼ˆiOS: 98.1%, Android: 92.3%ï¼‰</li>\n<li><strong>Safari</strong>ï¼š97.8%</li>\n<li><strong>Chrome</strong>ï¼š98.5%</li>\n<li><strong>åä¸ºæµè§ˆå™¨</strong>ï¼š89.7%</li>\n<li><strong>å…¶ä»–æµè§ˆå™¨</strong>ï¼š91.4%</li>\n</ul>\n<h4>16.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</h4>\n<ul>\n<li><strong>å¹³å‡å¤åˆ¶æ—¶é—´</strong>ï¼š&#x3C; 200ms</li>\n<li><strong>ç•Œé¢å“åº”æ—¶é—´</strong>ï¼š&#x3C; 100ms</li>\n<li><strong>é”™è¯¯æ¢å¤æ—¶é—´</strong>ï¼š&#x3C; 500ms</li>\n</ul>\n<hr>\n<h2>ğŸ‰ æ€»ç»“</h2>\n<h3>17. æ–¹æ¡ˆä¼˜åŠ¿</h3>\n<p>é€šè¿‡è¿™å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº†ç§»åŠ¨ç«¯ H5 å¤åˆ¶åŠŸèƒ½çš„å„ç§å…¼å®¹æ€§é—®é¢˜ï¼š</p>\n<h4>17.1 æŠ€æœ¯ä¼˜åŠ¿</h4>\n<ol>\n<li><strong>å…¨é¢è¦†ç›–</strong>ï¼šæ”¯æŒå¾®ä¿¡ã€Safariã€Chrome ç­‰ä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨</li>\n<li><strong>æ¸è¿›å¼é™çº§</strong>ï¼šä»æœ€ä½³æ–¹æ¡ˆé€æ­¥é™çº§åˆ°å…¼å®¹æ–¹æ¡ˆ</li>\n<li><strong>ç”¨æˆ·å‹å¥½</strong>ï¼šæä¾›æ¸…æ™°çš„æ“ä½œåé¦ˆå’Œå¼•å¯¼</li>\n<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé‡‡ç”¨æ‡’åŠ è½½å’Œé˜²æŠ–ç­–ç•¥</li>\n<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤</li>\n</ol>\n<h4>17.2 å®æˆ˜ä»·å€¼</h4>\n<ul>\n<li><strong>ç”Ÿäº§ç¯å¢ƒéªŒè¯</strong>ï¼šå·²åœ¨å¤šä¸ªé¡¹ç›®ä¸­ç¨³å®šè¿è¡Œ</li>\n<li><strong>ç”¨æˆ·ä½“éªŒæå‡</strong>ï¼šæ˜¾è‘—æé«˜äº†åˆ†äº«åŠŸèƒ½çš„æˆåŠŸç‡</li>\n<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šæä¾›äº†å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆ</li>\n<li><strong>å…¼å®¹æ€§ä¿éšœ</strong>ï¼šè¦†ç›–äº†ä¸»æµç§»åŠ¨ç«¯æµè§ˆå™¨ç¯å¢ƒ</li>\n</ul>\n<h3>18. æœ€ä½³å®è·µå»ºè®®</h3>\n<h4>18.1 å®æ–½å»ºè®®</h4>\n<ol>\n<li><strong>ä¼˜å…ˆä½¿ç”¨æ¸è¿›å¼é™çº§ç­–ç•¥</strong></li>\n<li><strong>é‡è§†ç”¨æˆ·ä½“éªŒè®¾è®¡</strong></li>\n<li><strong>åšå¥½é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•</strong></li>\n<li><strong>å®šæœŸè¿›è¡Œå…¼å®¹æ€§æµ‹è¯•</strong></li>\n<li><strong>å…³æ³¨æ€§èƒ½ä¼˜åŒ–</strong></li>\n</ol>\n<h4>18.2 æ³¨æ„äº‹é¡¹</h4>\n<ul>\n<li>åŠæ—¶æ¸…ç†ä¸´æ—¶åˆ›å»ºçš„ DOM å…ƒç´ </li>\n<li>æ³¨æ„äº‹ä»¶ç›‘å¬å™¨çš„æ·»åŠ å’Œç§»é™¤</li>\n<li>è€ƒè™‘ä¸åŒæµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥</li>\n<li>æä¾›å‹å¥½çš„é”™è¯¯æç¤ºå’Œæ“ä½œå¼•å¯¼</li>\n</ul>\n<hr>\n<h2>ğŸ“š å‚è€ƒèµ„æº</h2>\n<h3>19. ç›¸å…³æ–‡æ¡£</h3>\n<ul>\n<li><a href=\"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/JS-SDK.html\">å¾®ä¿¡ JS-SDK æ–‡æ¡£</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API\">MDN Clipboard API</a></li>\n<li><a href=\"https://github.com/AlloyTeam/Mars\">ç§»åŠ¨ç«¯ H5 å¼€å‘æœ€ä½³å®è·µ</a></li>\n</ul>\n<h3>20. è¿›é˜¶å­¦ä¹ </h3>\n<ul>\n<li>å¾®ä¿¡å°ç¨‹åºå¤åˆ¶åŠŸèƒ½å®ç°</li>\n<li>PWA åº”ç”¨ä¸­çš„å‰ªè´´æ¿æ“ä½œ</li>\n<li>è·¨å¹³å°å¤åˆ¶åŠŸèƒ½è§£å†³æ–¹æ¡ˆ</li>\n<li>ç§»åŠ¨ç«¯æµè§ˆå™¨å…¼å®¹æ€§æ·±åº¦åˆ†æ</li>\n</ul>\n<p>å¸Œæœ›è¿™å¥—è§£å†³æ–¹æ¡ˆèƒ½ä¸ºé‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æä¾›å‚è€ƒå’Œå¸®åŠ©ï¼ğŸš€</p>"
  },
  "_id": "articles/h5-wx-copy-article.md",
  "_raw": {
    "sourceFilePath": "articles/h5-wx-copy-article.md",
    "sourceFileName": "h5-wx-copy-article.md",
    "sourceFileDir": "articles",
    "contentType": "markdown",
    "flattenedPath": "articles/h5-wx-copy-article"
  },
  "type": "Article",
  "slug": "h5-wx-copy-article",
  "readingTime": {
    "text": "17 min read",
    "minutes": 16.87,
    "time": 1012200,
    "words": 3374
  },
  "url": "/articles/h5-wx-copy-article"
}